function smithChart(e){var t=e.dom,l=e.titleOneArr,s=e.legendNameOneArr,O=e.allDataArr,i=e.Type,V=e.msgdom,a=e.lineColorArray,Y=e.msgFun,o=e.msgInitFun,_=e.GHzFlag;t.innerHTML="",t.innerHTML='<div class="picName" style="position: absolute;"> </div><div class="value" style="position:absolute;z-index:1"></div> <div class="pointValue" style="position:absolute;z-index:1"></div><div class="line1" style="position:absolute;z-index:1"></div> <div class="line2" style="position:absolute;z-index:1"></div><canvas class="canvas" style="position: absolute;"></canvas><div class="legend" style="position: absolute;display:none;"></div>';var j=t.getElementsByClassName("picName")[0],J=t.getElementsByClassName("legend")[0],r=l,K=s,Q=O;j.innerHTML=r[0],j.style.cssText="text-align: center;font-size: 20px;font-weight: bold;font-family: 宋体;display:none;";var R=t.getElementsByClassName("value")[0],U=t.getElementsByClassName("pointValue")[0],Z=t.getElementsByClassName("line1")[0],$=t.getElementsByClassName("line2")[0],ee=t.getElementsByClassName("canvas")[0];ee.setAttribute("width",t.offsetWidth),ee.setAttribute("height",t.offsetHeight);var te=0,le=ee.width,se=ee.height,ie=ee.getContext("2d");function n(e,t,l,s,i){this.type=e,this.axis=t,this.valueType=l,this.axisPointer=s,this.color=i}if(n.prototype.type="SmithPlot",n.prototype.plot=function(){var e=this.type,f=this.valueType,m=te,t=this.axisPointer,b=this.color;j.style.height=te+"px",j.style.lineHeight=te+"px",j.style.color=b[7],j.style.width=ee.width+"px",J.style.top=se<le?1.1*se+"px":1.05*le+te+"px";var l,s,i,a,o,r,n,u,P,d,y,h,x,p=[],g=[],v=[],c=[],M=[],k=[],T=[],C=[],w=[],H=[];if("S11"==e||"S22"==e){for(p=[.2,.4,.8,1,1.5,2,3,4,5,10,50],d=s=0;d<p.length;d++)g[d]=1/(1+p[d]),v[d]=p[d]/(1+p[d]);for(a=1,y=0;y<p.length;y++)M[y]=1/p[y],k[y]=1/p[y];for(r=1,h=0;h<p.length;h++)C[h]=-1/p[h],w[h]=1/p[h];n=1,P=u=0,x=Math.min(le,se)/2}else"S12"==e?p=[.02,.04,.06,.08,.1,.12,.14]:"S21"==e&&(p=[5,10,15,20]);P=(u=se<le?(u-n)*x+2*x+Math.abs(le-se)/2:(u-n)*x+2*x,(P-n)*x+2*x);var N=n*x;for(ie.beginPath(),ie.arc(u,P,N,0,2*Math.PI),ie.strokeStyle=b[0],ie.stroke(),ie.font="6px",ie.strokeText(n-1,u-N,P),ie.closePath(),ie.beginPath(),ie.arc(u,P,N,0,2*Math.PI),ie.strokeStyle=b[0],ie.stroke(),ie.clip(),ie.closePath(),d=0;d<p.length;d++)l=(v[d]=se<le?(v[d]-n)*x+2*x+Math.abs(le-se)/2:(v[d]-n)*x+2*x,(s-n)*x+2*x),c[d]=g[d]*x,ie.beginPath(),ie.arc(v[d],l,c[d],0,2*Math.PI),ie.strokeStyle=b[0],ie.stroke(),ie.font="6px",ie.strokeText(p[d],v[d]-c[d],l);for(y=0;y<p.length;y++){k[y]=(i=se<le?(a-n)*x+2*x+Math.abs(le-se)/2:(a-n)*x+2*x,(M[y]-n)*x+2*x),T[y]=M[y]*x,ie.beginPath(),ie.arc(i,k[y],T[y],0,2*Math.PI),ie.strokeStyle=b[0],ie.stroke();var S=v[y]-c[y]+.2*x;S<=i-T[y]&&(S=i-T[y]);var L=-Math.sqrt(T[y]*T[y]-(S-i)*(S-i))+k[y];ie.font="6px",ie.strokeText(-p[y],S,L),ie.closePath()}for(h=0;h<p.length;h++){w[h]=(o=se<le?(r-n)*x+2*x+Math.abs(le-se)/2:(r-n)*x+2*x,(C[h]-n)*x+2*x),H[h]=Math.abs(C[h])*x,ie.beginPath(),ie.arc(o,w[h],H[h],0,2*Math.PI),ie.strokeStyle=b[0],ie.stroke();var F=v[h]-c[h]+.2*x;F<=o-H[h]&&(F=o-H[h]);var E=Math.sqrt(H[h]*H[h]-(F-o)*(F-o))+w[h];ie.font="6px",ie.strokeText(p[h],F,E),ie.closePath()}1==this.axis&&(ie.beginPath(),ie.moveTo(0,P),ie.lineTo(le,P),ie.strokeStyle=b[1],ie.stroke(),ie.closePath(),ie.beginPath(),ie.moveTo(u,0),ie.lineTo(u,se),ie.strokeStyle=b[1],ie.stroke(),ie.closePath());var I=Q.length;if(J.style.left=le/2-25*I+"px",0<I){var B=new Array(I);J.innerHTML="";for(var z=0;z<I;z++){B[z]=new Array(Q[z].length);for(var q=0;q<B[z].length;q++){var A=u+parseFloat(Q[z][q][1])*x,X=P-parseFloat(Q[z][q][2])*x;B[z][q]=[A,X]}for(var G=0;G<B[z].length-1;G++)ie.beginPath(),ie.lineWidth=2,ie.moveTo(B[z][G][0],B[z][G][1]),ie.lineTo(B[z][G+1][0],B[z][G+1][1]),ie.strokeStyle=b[2][z],ie.stroke(),ie.closePath();var W=document.createElement("div");W.style.cssText="float:left;width:20px;height:2px;margin:10px 5px;",W.style.backgroundColor=b[2][z];var D=document.createElement("div");D.style.float="left",D.style.color=b[6],D.innerHTML=K[z],J.appendChild(W),J.appendChild(D)}}1==t?ee.addEventListener("mousemove",function(e,t){Z.style.display="none",$.style.display="none",R.style.display="none",U.style.display="none";var l=ae(e);if(ie.beginPath(),ie.arc(u,P,N,0,2*Math.PI),ie.fillStyle="rgba(0, 0, 0, 0)",ie.fill(),ie.closePath(),ie.isPointInPath(l.x,l.y)){A=(l.x-u)/x,X=(P-l.y)/x,Z.style.display="",$.style.display="",R.style.display="",R.innerHTML='<div style="height: 20px;margin-top: -25px;margin-left: 10px;">'+A.toFixed(3)+","+X.toFixed(3)+"</div>",Z.innerHTML='<div  style="height: 1px;background-color: rgba(0, 0, 0, 0);border-top: 1px dashed black ;"></div>',$.innerHTML='<div  style="width: 1px;background-color: rgba(0, 0, 0, 0);border-left: 1px dashed black ;"></div>';var s=Z.childNodes[0],i=$.childNodes[0],a=2*Math.sqrt(N*N-(l.y-P)*(l.y-P)),o=2*Math.sqrt(N*N-(l.x-u)*(l.x-u)),r=l.x-(u-Math.sqrt(N*N-(l.y-P)*(l.y-P))),n=l.y-(P-Math.sqrt(N*N-(l.x-u)*(l.x-u)));if(R.style.left=l.x+"px",R.style.top=l.y+m+"px",Z.style.left=l.x+"px",Z.style.top=l.y+m+"px",$.style.left=l.x+"px",$.style.top=l.y+m+"px",s.style.width=a+"px",i.style.height=o+"px",s.style.marginLeft=-r+"px",i.style.marginTop=-n+"px","point"==f)for(var d=0;d<I;d++)for(var y=0;y<B[d].length;y++)if(ie.beginPath(),ie.arc(B[d][y][0],B[d][y][1],2,0,2*Math.PI),ie.fillStyle="rgba(0, 0, 0, 0)",ie.fill(),ie.closePath(),ie.isPointInPath(l.x,l.y)){U.style.display="",U.innerHTML='<div id="drawPoint" style="width: 8px;height:8px;border-radius: 50%;margin-left: -4px;margin-top: -4px;"></div><div id="valueContent" style="margin: 5px;"><div style="margin: 2px 5px">x:'+[Q[d][y][1]]+'</div><div style="margin: 2px 5px">y:'+[Q[d][y][2]]+"</div></div>";var h=document.getElementById("drawPoint"),p=document.getElementById("valueContent");h.style.color=b[3],h.style.backgroundColor=b[4][d],p.style.color=b[3],p.style.backgroundColor=b[5],U.style.left=B[d][y][0]+"px",U.style.top=B[d][y][1]+m+"px"}}},!1):ee.addEventListener("mousemove",function(e,t){Z.style.display="none",$.style.display="none",R.style.display="none",U.style.display="none";for(var l=ae(e),s=0;s<I;s++)for(var i=0;i<B[s].length;i++)if(ie.beginPath(),ie.arc(B[s][i][0],B[s][i][1],2,0,2*Math.PI),ie.fillStyle="rgba(0, 0, 0, 0)",ie.fill(),ie.closePath(),ie.isPointInPath(l.x,l.y))if("point"==f){U.style.display="",U.innerHTML='<div  style="width: 8px;height:8px;border-radius: 50%;margin-left: -4px;margin-top: -4px;"></div><div  style="margin: 10px;border-radius: 5px;"><div style="margin: 2px 5px">x:'+Q[s][i][1]+'</div><div style="margin: 2px 5px">y:'+Q[s][i][2]+"</div></div>";var a=U.childNodes[0],o=U.childNodes[1];a.style.color=b[3],a.style.backgroundColor=b[4][s],o.style.color=b[3],o.style.backgroundColor=b[5],U.style.left=B[s][i][0]+"px",U.style.top=B[s][i][1]+m+"px"}else if("cross"==f){Z.style.display="",$.style.display="",R.style.display="",R.innerHTML='<div style="height: 20px;">'+Q[s][i][1]+","+Q[s][i][2]+"</div>",Z.innerHTML='<div   style="height: 1px;background-color: rgba(0, 0, 0, 0);border-top: 1px dashed black ;"></div>',$.innerHTML='<div  style="width: 1px;background-color: rgba(0, 0, 0, 0);border-left: 1px dashed black ;"></div>';var r=Z.childNodes[0],n=$.childNodes[0],d=2*Math.sqrt(N*N-(B[s][i][1]-P)*(B[s][i][1]-P)),y=2*Math.sqrt(N*N-(B[s][i][0]-u)*(B[s][i][0]-u)),h=B[s][i][0]-(u-Math.sqrt(N*N-(B[s][i][1]-P)*(B[s][i][1]-P))),p=B[s][i][1]-(P-Math.sqrt(N*N-(B[s][i][0]-u)*(B[s][i][0]-u)));if(R.style.left=B[s][i][0]+"px",R.style.top=B[s][i][1]+m+"px",Z.style.left=B[s][i][0]+"px",Z.style.top=B[s][i][1]+m+"px",$.style.left=B[s][i][0]+"px",$.style.top=B[s][i][1]+m+"px",r.style.width=d+"px",n.style.height=y+"px",r.style.marginLeft=-h+"px",n.style.marginTop=-p+"px",V&&O.length){var x=Q[s][i][0]/1e7;!0===_&&(x=Q[s][i][0]);var g="("+Q[s][i][1].toFixed(2)+","+Q[s][i][2].toFixed(2)+"),"+x.toFixed(2)+"GHz";if(Y){var v=Q[s][0][0]/1e7;!0===_&&(v=Q[s][0][0]);var c="("+Q[s][0][1].toFixed(2)+","+Q[s][0][2].toFixed(2)+"),"+v.toFixed(2)+"GHz";Y(g,s,c)}else V.getElementsByClassName("Smith_Msg2")[0].innerText=g}}},!1)},V&&O.length){var d=Q[0][0][0]/1e7;!0===_&&(d=Q[0][0][0]);var y="("+Q[0][0][1].toFixed(2)+","+Q[0][0][2].toFixed(2)+"),"+d.toFixed(2)+"GHz";o?o(y):V.getElementsByClassName("Smith_Msg2")[0].innerText=y}function ae(e){var t,l;return e.layerX||0==e.layerX?(t=e.layerX,l=e.layerY):(e.offsetX||0==e.offsetX)&&(t=e.offsetX,l=e.offsetY),{x:t,y:l}}n.prototype.onresize=function(){ee.setAttribute("width",t.offsetWidth),ee.setAttribute("height",t.offsetHeight-20),le=ee.width,se=ee.height,te=0,h.plot()};var h=new n(i,!1,"cross",!1,["grey","black",a=a||["#1baee1","red"],"white",["#1baee1","red"],"rgba(128, 128, 128, 0.75)","grey","#028BCD"]);return h.onresize(),h}