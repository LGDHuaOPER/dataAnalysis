var dataListStore=Object.create(null);function tableEllipsis(){var t=$("div.g_bodyin_bodyin_body>table"),e=t.find("th:visible").length,a=_.floor((t.innerWidth()-50)/(e-1));eouluGlobal.C_tableEllipsis({container:$("div.g_bodyin_bodyin_body>table"),widthArr:_.fill(_.fill(Array(e),a),50,0,1)})}function injectStoreValue(a){var i;!0===a.isNull?_.forOwn(a.obj,function(t,e){a.obj[e].value=null}):(i=_.isNil(a.extra)||_.isEmpty(a.extra)?[]:a.extra.key,_.forOwn(a.obj,function(t,e){-1==_.indexOf(a.exclude,_.toString(e))&&-1==_.indexOf(i,_.toString(e))&&(a.obj[e].value=_.trim($("#"+a.prefix+e).val()))}),_.forEach(i,function(t,e){a.obj[t].value=a.extra.value[e]}))}function validationStoreValue(a){var i=!0;return _.forOwn(a.obj,function(t,e){return!t.isRequired||(_.isNil(t.value)||_.isEmpty(t.value)?(dataListSwalMixin({title:a.title,text:t.message,timer:1600,callback:null}),i=!1):void 0)}),i}function dataListSwalMixin(e){eouluGlobal.S_getSwalMixin()({title:e.title,text:e.text,html:e.html,type:e.type||"info",showConfirmButton:e.showConfirmButton||!1,timer:e.timer}).then(function(t){t.value?_.isFunction(e.confirmCallback)&&e.confirmCallback():t.dismiss!=swal.DismissReason.backdrop&&t.dismiss!=swal.DismissReason.esc&&t.dismiss!=swal.DismissReason.timer||_.isFunction(e.callback)&&e.callback()})}function searchValShowRed(){$(".g_bodyin_bodyin_body tbody td:not(.not_search)").each(function(){var t=$(this).text(),e="<b style='color:red'>"+dataListStore.state.pageObj.searchVal+"</b>",a=t.replace(new RegExp(dataListStore.state.pageObj.searchVal,"g"),e);$(this).empty().html(a)})}function additionUpdateIsSubmit(t){$(".futureDT2_"+t).find("span.glyphicon-info-sign").length?$(".futureDT2_"+t+"_r_foot>.btn-primary").prop("disabled",!0):$(".futureDT2_"+t+"_r_foot>.btn-primary").prop("disabled",!1)}function getProgress(a){a=a||0,setTimeout(function(){$.ajax({type:"GET",url:"LoadProgress",data:{fileName:dataListStore.addition.fileName.value},dataType:"text",success:function(t){var e=t.match(/\d+/);console.log(t),_.isNil(e)&&getProgress(0),a=_.floor(e[0],1),$("div.futureDT2_addition_r_progress .progress-bar").attr("aria-valuenow",a).css("width",a+"%").text(a+"%"),!0===dataListStore.state.additionErrorFlag?(eouluGlobal.S_getSwalMixin()({showConfirmButton:!1,title:"提交进度",text:"提交出错，进度请求中止！",timer:1800,type:"error"}),dataListStore.state.additionErrorFlag=!1):dataListStore.state.additionFinishFlag?($("div.futureDT2_addition_r_progress .progress-bar").attr("aria-valuenow",100).css("width","100%").text("100%"),dataListStore.state.additionFinishFlag=!1):getProgress(a)},error:function(t,e,a){console.log(t),console.log(e),console.log(a)}})},50)}function barDestroy(){dataListStore.state.bar.flag&&(dataListStore.state.bar.Bar.destroy(),dataListStore.state.bar.flag=!1),$(".upload_l_tit").text(""),$(".upload_l_body").text(""),$(".row_extra3>div:nth-child(2)>span.glyphicon-remove, .row_extra3>div:nth-child(2)>span.glyphicon-ok, .row_extra3>div:nth-child(2)>span.glyphicon-open").hide()}function showBarAndOther(t){var e=t.fileObj;$(".row_extra3>div:nth-child(2)>span.glyphicon-remove, .row_extra3>div:nth-child(2)>span.glyphicon-open").show(),$(".row_extra3>div:nth-child(2)>span.glyphicon-ok").hide(),$(".upload_l_tit").text(e.name),$(".upload_l_body").text("大小："+eouluGlobal.S_getFileSize(e.size)),dataListStore.state.bar.flag||(dataListStore.state.bar.Bar=new ProgressBar.Circle("#upload_container",dataListStore.state.bar.option),dataListStore.state.bar.flag=!0),dataListStore.state.bar.Bar.text.style.fontFamily='"microsoft yahei", "Arial", sans-serif',dataListStore.state.bar.Bar.text.style.fontSize="2rem",dataListStore.addition.file.value=e,dataListStore.addition.fileName.value=null,dataListStore.addition.filePath.value=null}function dataListFileUpload(t){var e=t.formData,a=t.successOther,i=t.errorOther;$.ajax({type:"POST",async:!0,accept:"application/json; charset=utf-8",data:e,url:"UploadFile",processData:!1,contentType:!1,cache:!1,dataType:"json",xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.loaded,a=t.total,i=Math.floor(100*e/a)/100;Math.floor(1e3*e/a);dataListStore.state.bar.Bar.animate(i,{duration:1},function(){1!=i&&1!=i||dataListSwalMixin({title:"上传完成！",text:"服务器已经接收完 "+dataListStore.addition.file.value.name+"，请记得提交",type:"success",timer:2e3,callback:null})})}},!1),myXhr},success:function(t){_.isNil(t)||_.isEmpty(t)?(dataListSwalMixin({title:"处理失败！",text:dataListStore.addition.file.value.name+" 已经上传至服务器，但是处理失败",type:"error",timer:2e3,callback:null}),barDestroy(),dataListStore.addition.file.value=null):(_.forOwn(t,function(t,e){dataListStore.addition.fileName.value=e,dataListStore.addition.filePath.value=t}),$(".row_extra3>div:nth-child(2)>span.glyphicon-ok").show(),$(".row_extra3>div:nth-child(2)>span.glyphicon-remove, .row_extra3>div:nth-child(2)>span.glyphicon-open").hide()),a&&_.isFunction(a)&&a(t)},error:function(){i&&_.isFunction(i)&&i(data)},beforeSend:function(t){eouluGlobal.C_btnDisabled($(".futureDT2_addition_r_foot .btn-primary"),!0,"正在上传...")},complete:function(t,e){eouluGlobal.C_btnAbled($(".futureDT2_addition_r_foot .btn-primary"),!0,"提交")}})}dataListStore.state=Object.create(null),dataListStore.state.userName=null,dataListStore.state.additionFinishFlag=!1,dataListStore.state.additionErrorFlag=!1,dataListStore.state.pageObj={pageOption:null,currentPage:null,pageCount:null,searchFlag:!1,searchVal:""},dataListStore.state.authorityJQDomMap={"管理员":[$(".g_info_r .AdminOperat")],"上传":[$(".g_bodyin_bodyin_tit_l>[data-iicon='glyphicon-remove-circle']")],"删除":[$(".g_bodyin_bodyin_tit_l>[data-iicon='glyphicon-remove']"),$(".operate_othertd [data-iicon='glyphicon-remove']")],"回收站":[$(".g_bodyin_bodyin_tit_l>[data-iicon='glyphicon-trash']")],"修改":[$(".operate_othertd [data-iicon='glyphicon-edit']")],"详细数据":[$(".operate_othertd [data-iicon='glyphicon-eye-open']")]},dataListStore.state.productCategory=[],dataListStore.state.bar={flag:!1,option:{color:"#32c462",strokeWidth:4,trailColor:"#ddd",trailWidth:5,easing:"easeInOut",text:{autoStyleContainer:!1},from:{color:"#aaa",width:3},to:{color:"#333",width:5},step:function(t,e){e.path.setAttribute("stroke","#32c462"),e.path.setAttribute("stroke-width",t.width);var a=Math.round(100*e.value());0===a?e.setText(""):e.setText(a+"%")}},Bar:null},dataListStore.state.uploadClassify=null,dataListStore.addition=Object.create(null),dataListStore.addition.file={value:null,isRequired:!1,reg:null},dataListStore.addition.productCategory={value:null,isRequired:!0,message:"产品类别必填！",reg:null},dataListStore.addition.dataFormat={value:null,isRequired:!0,message:"数据格式必选！",reg:null},dataListStore.addition.description={value:null,isRequired:!1,reg:null},dataListStore.addition.fileName={value:null,isRequired:!0,message:"文件必需！请检查或先上传",reg:null},dataListStore.addition.filePath={value:null,isRequired:!0,message:"文件上传异常！请重试",reg:null},dataListStore.addition.lastModified={value:null,isRequired:!0,message:"文件修改时间异常，请删除或刷新后重新选择文件",reg:null},dataListStore.update=Object.create(null),dataListStore.update.productCategory={value:null,isRequired:!0,message:"产品类别必选！",reg:null},dataListStore.update.testEndDate={value:null,isRequired:!0,message:"测试完成时间必选！",reg:null},dataListStore.update.description={value:null,isRequired:!1},dataListStore.update.waferId={value:null,isRequired:!0,message:"操作错误！晶圆ID异常！",reg:null},$(function(){eouluGlobal.C_pageAuthorityCommonHandler({authorityJQDomMap:_.cloneDeep(dataListStore.state.authorityJQDomMap),callback:function(){$(".g_bodyin_bodyin_tit_l>img:visible").each(function(t,e){0<t&&$(e).css("margin-left","15px"),$(e).is("[data-iicon='glyphicon-trash']")&&$(e).css("margin-left","12px")}),$(".g_bodyin_bodyin_body tbody>tr").each(function(t,e){$(e).find("td.operate_othertd img:visible").each(function(t,e){0<t&&$(e).css("margin-left","5px")})})}}),tableEllipsis(),dataListStore.state.pageObj.currentPage=_.toNumber($("body").data("currentpage")),dataListStore.state.pageObj.pageCount=_.toNumber($("body").data("totalcount")),dataListStore.state.pageObj.searchVal=_.trim($("#search_input").val()),dataListStore.state.pageObj.searchFlag=""!==dataListStore.state.pageObj.searchVal,dataListStore.state.pageObj.pageOption={limit:10,count:dataListStore.state.pageObj.pageCount,curr:dataListStore.state.pageObj.currentPage,ellipsis:!0,pageShow:2,hash:!1,callback:function(t){var e;(dataListStore.state.pageObj.searchFlag&&searchValShowRed(),t.isFirst)||(e=dataListStore.state.pageObj.searchFlag?{currentPage:t.curr,keyword:dataListStore.state.pageObj.searchVal}:{currentPage:t.curr},eouluGlobal.S_settingURLParam(e,!1,!1,!1))}},new Pagination("#pagelist",dataListStore.state.pageObj.pageOption),dataListStore.state.userName=$("body").data("curusername");var t=store.get("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem");_.isNil(t)&&(t=[]),_.forEach(t,function(t,e){$(".g_bodyin_bodyin_body tbody input[type='checkbox'][data-iid='"+_.toNumber(t)+"']").prop("checked",!0).parent().parent().addClass("warning")}),$("#checkAll").prop("checked",$(".g_bodyin_bodyin_body tbody input[type='checkbox']").length==$(".g_bodyin_bodyin_body tbody input[type='checkbox']:checked").length),$(".data_c_c .category_span").each(function(){dataListStore.state.productCategory.push($(this).attr("value"))}),dataListStore.state.productCategory=_.uniq(dataListStore.state.productCategory),$("#futureDT2_addition_productCategory, #futureDT2_update_productCategory").each(function(t,e){new Awesomplete(e,{list:_.cloneDeep(dataListStore.state.productCategory),minChars:1,maxItems:13,autoFirst:!0})})}),$(window).on("resize",function(){tableEllipsis()}),$(".g_bodyin_bodyin_tit_l>[data-iicon='glyphicon-remove-circle']").click(function(){$(".futureDT2_bg_cover, .futureDT2_addition").slideDown(200),$(".futureDT2_addition_l, .futureDT2_addition_r").height($(".futureDT2_addition").height()),barDestroy(),$("div.futureDT2_addition_r_bodyin .isRequired").trigger("change")}),$(".futureDT2_addition_r_foot .btn-warning, .futureDT2_update_r_foot .btn-warning").click(function(){var t=$(this).parents("[data-iparent]");$(".futureDT2_bg_cover").slideUp(200),t.slideUp(200);var e=t.data("iparent");injectStoreValue({obj:dataListStore[e],isNull:!0}),$("div.futureDT2_addition_r_progress").slideUp(30)}),$(document).on("click",".operate_othertd>[data-iicon='glyphicon-edit']",function(t){t.stopPropagation();var e=$(this).parent();$(".futureDT2_bg_cover, .futureDT2_update").slideDown(200),$(".futureDT2_update_l, .futureDT2_update_r").height($(".futureDT2_update").height()),dataListStore.update.waferId.value=_.toString($(this).data("iid"));var a=e.siblings(".product_category_td").data("ivalue"),i=e.siblings(".test_end_date_td").data("ivalue"),o=e.siblings(".description_td").data("ivalue");$("#futureDT2_update_productCategory").val(a),$("#futureDT2_update_testEndDate").val(i),$("#futureDT2_update_description").val(o),$("div.futureDT2_update_r_bodyin .isRequired").trigger("change")}),$(".futureDT2_addition_r_foot .btn-primary, .futureDT2_update_r_foot .btn-primary").click(function(){var t=$(this).parents("[data-iparent]").data("iparent");if(_.isEqual(t,"addition")){var e;if(_.isNil(dataListStore.addition.file.value)?e=null:(e=moment(dataListStore.addition.file.value.lastModified).format("YYYY-MM-DD HH:mm:ss"),(_.isNil(e)||_.isEmpty(e))&&(e=moment(dataListStore.addition.file.value.lastModifiedDate.getTime()).format("YYYY-MM-DD HH:mm:ss"))),console.log("lastModified",e),injectStoreValue({obj:dataListStore.addition,exclude:["file","fileName","filePath"],prefix:"futureDT2_addition_",extra:{key:["lastModified"],value:[e]}}),!validationStoreValue({obj:dataListStore.addition,title:"添加提示"}))return!1;var a={};_.forOwn(dataListStore.addition,function(t,e){"file"!=e&&(a[e]=t.value)}),eouluGlobal.C_btnDisabled($(".futureDT2_addition_r_foot .btn-primary"),!0,"提交中..."),dataListStore.state.additionFinishFlag=!1,dataListStore.state.additionErrorFlag=!1,$("div.futureDT2_addition_r_progress").slideDown(30),$("div.futureDT2_addition_r_progress .progress-bar").attr("aria-valuenow",0).css("width","0%").text("0%"),getProgress(0),eouluGlobal.S_XHR({status200:function(t){var e,a;console.log(t),t=_.toString(t).replace(/^"/,"").replace(/"$/,""),console.log(t),console.log(typeof t),-1<t.indexOf("文件夹")?(a='<div class="container-fluid">'+t+'<div><img src="assets/img/modules/dataList/fileSuffix.png" /></div></div>',e=void 0):(e=t,a=void 0),dataListSwalMixin({title:"添加提示",html:a,text:e,timer:1e4,showConfirmButton:!0,callback:function(){eouluGlobal.S_settingURLParam({currentPage:1},!1,!1,!1)},confirmCallback:function(){eouluGlobal.S_settingURLParam({currentPage:1},!1,!1,!1)}}),dataListStore.state.additionFinishFlag=!0,dataListStore.state.additionErrorFlag=!1,-1<t.indexOf("有误")||-1<t.indexOf("未接收")||-1<t.indexOf("失败")?barDestroy():-1<t.indexOf("成功")&&$(".futureDT2_addition_r_foot .btn-warning").trigger("click")},statusError:function(t,e){console.log(e),console.log(t),eouluGlobal.C_server500Message({callback:null}),dataListStore.state.additionFinishFlag=!1,dataListStore.state.additionErrorFlag=!0},readyState4:function(t,e,a){eouluGlobal.C_btnAbled($(".futureDT2_addition_r_foot .btn-primary"),!0,"提交")},type:"POST",postObject:{url:"UploadStorage",data:a,classify:"form",responseType:"text"}})}else if(_.isEqual(t,"update")){if(injectStoreValue({obj:dataListStore.update,exclude:["waferId"],prefix:"futureDT2_update_"}),!validationStoreValue({obj:dataListStore.update,title:"修改提示"}))return!1;var i={};_.forOwn(dataListStore.update,function(t,e){i[e]=t.value}),$.ajax({type:"POST",url:"DataListUpdate",data:i,dataType:"json"}).then(function(t){dataListSwalMixin(1==t?{title:"修改提示",text:"修改成功",type:"success",timer:1500,callback:function(){window.location.reload()}}:0==t?{title:"修改提示",text:"修改失败",timer:1500,callback:null}:{title:"修改提示",text:t,timer:1800,callback:null})},function(t,e,a){console.log(t),console.log(e),console.log(a),eouluGlobal.C_server500Message({callback:null})})}}),$(document).on("click",".operate_othertd [data-iicon='glyphicon-remove']",function(t){t.stopPropagation();var i=$(this);eouluGlobal.S_getSwalMixin()({title:"确定删除吗？",text:"删除后将放入回收站",type:"warning",showCancelButton:!0,confirmButtonText:"确定，删除！",cancelButtonText:"不，取消！",reverseButtons:!1}).then(function(t){t.value?$.ajax({type:"GET",url:"DataListRemove",data:{waferId:i.data("iid")},dataType:"json"}).then(function(t){dataListSwalMixin(1==t?{title:"删除提示",text:"删除成功",type:"success",timer:1500,callback:function(){var t=store.get("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem")||[];if(_.pull(t,i.data("iid").toString()),store.set("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem",t),1==$(".g_bodyin_bodyin_body tbody>tr").length){var e,a=$("body").data("currentpage")-1==0?1:$("body").data("currentpage")-1;e=dataListStore.state.pageObj.searchFlag?{currentPage:a,keyword:dataListStore.state.pageObj.searchVal}:{currentPage:a},eouluGlobal.S_settingURLParam(e,!1,!1,!1)}else window.location.reload()}}:0==t?{title:"删除提示",text:"删除失败",timer:1500,callback:null}:{title:"删除提示",text:t,timer:1600,callback:null})},function(){eouluGlobal.C_server500Message({callback:null})}):t.dismiss!=swal.DismissReason.backdrop&&t.dismiss!=swal.DismissReason.esc&&t.dismiss!=swal.DismissReason.cancel||dataListSwalMixin({title:"删除提示",text:"取消了，不作处理",timer:1500,callback:null})})}).on("click",".g_bodyin_bodyin_tit_l>[data-iicon='glyphicon-remove']",function(){var a=store.get("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem");if(_.isNil(a)||_.isEmpty(a))return!1;eouluGlobal.S_getSwalMixin()({title:"确定删除吗？",text:"将删除选中的"+a.length+"条数据，删除后将放入回收站",type:"warning",showCancelButton:!0,confirmButtonText:"确定，删除！",cancelButtonText:"不，取消！",reverseButtons:!1}).then(function(t){t.value?$.ajax({type:"GET",url:"DataListRemove",data:{waferId:_.join(a,",")},dataType:"json"}).then(function(t){dataListSwalMixin(1==t?{title:"删除提示",text:"删除成功",type:"success",timer:1500,callback:function(){var t,e;t=a.length==$(".g_bodyin_bodyin_body tbody input[type='checkbox']:checked").length?(e=$(".g_bodyin_bodyin_body tbody input[type='checkbox']:checked").length==$(".g_bodyin_bodyin_body tbody input[type='checkbox']").length?$("body").data("currentpage")-1==0?1:$("body").data("currentpage")-1:$("body").data("currentpage"),dataListStore.state.pageObj.searchFlag?{currentPage:e,keyword:dataListStore.state.pageObj.searchVal}:{currentPage:e}):dataListStore.state.pageObj.searchFlag?{currentPage:1,keyword:dataListStore.state.pageObj.searchVal}:{currentPage:1},store.set("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem",[]),eouluGlobal.S_settingURLParam(t,!1,!1,!1)}}:0==t?{title:"删除提示",text:"删除失败",timer:1500,callback:null}:{title:"删除提示",text:t,timer:1600,callback:null})},function(){eouluGlobal.C_server500Message({callback:null})}):t.dismiss!=swal.DismissReason.backdrop&&t.dismiss!=swal.DismissReason.esc&&t.dismiss!=swal.DismissReason.cancel||dataListSwalMixin({title:"删除提示",text:"取消了，不作处理",timer:1300,callback:null})})}),$(document).on("mouseover",".g_bodyin_bodyin_body td",function(){$(this).addClass("warning"),$(this).parent().addClass("info")}).on("mouseout",".g_bodyin_bodyin_body td",function(){$(this).removeClass("warning"),$(this).parent().removeClass("info")}).on("click",".g_bodyin_bodyin_body td",function(){$(this).parent().toggleClass("warning info").find("[type='checkbox']").prop("checked",!$(this).parent().find("[type='checkbox']").prop("checked")).change()}).on("click",".g_bodyin_bodyin_body tbody [type='checkbox']",function(t){t.stopPropagation(),$(this).parent().parent().toggleClass("warning info")}).on("change",".g_bodyin_bodyin_body tbody [type='checkbox']",function(){var t=$(this).data("iid").toString(),e=store.get("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem");_.isNil(e)&&(e=[]),$(this).prop("checked")?e.push(t):_.pull(e,t),e=_.uniq(e),store.set("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem",e),$("#checkAll").prop("checked",$(".g_bodyin_bodyin_body tbody input[type='checkbox']").length==$(".g_bodyin_bodyin_body tbody input[type='checkbox']:checked").length)}),$("#checkAll").on({click:function(){var e=$(this),a=store.get("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem");_.isNil(a)&&(a=[]),$(".g_bodyin_bodyin_body tbody [type='checkbox']").each(function(){$(this).prop("checked",e.prop("checked"));var t=$(this).data("iid").toString();e.prop("checked")?($(this).parent().parent().removeClass("info").addClass("warning"),a.push(t)):($(this).parent().parent().removeClass("warning info"),_.pull(a,t))}),a=_.uniq(a),store.set("futureDT2Online__"+dataListStore.state.userName+"__dataList__selectedItem",a)}}),$("#jumpText").on("input propertychange",function(){$(this).val($(this).val().replace(/[^\d]/g,""))}),$("#jumpPage").on("click",function(){var t,e=Number($("#jumpText").val()),a=dataListStore.state.pageObj.currentPage,i=dataListStore.state.pageObj.pageCount;a==e||e<=0||i<e?$("#jumpText").val(""):(t=dataListStore.state.pageObj.searchFlag?{currentPage:e,keyword:dataListStore.state.pageObj.searchVal}:{currentPage:e},eouluGlobal.S_settingURLParam(t,!1,!1,!1))}),$("#search_input").on("input propertychange change",function(){$(this).val(_.trim($(this).val()))}).on("keyup",function(t){13==(t.keyCode||t.which||t.charCode)&&$(this).parent().parent().next().trigger("click")}),$("#search_button").on("click",function(){var t,e=_.trim($("#search_input").val());return t=_.isEmpty(e)?{currentPage:1}:{currentPage:1,keyword:e},eouluGlobal.S_settingURLParam(t,!1,!1,!1),!1}),$(".g_bodyin_bodyin_tit_r .form-control-feedback").click(function(){$(this).prev().children("input").val("")}),$(".row_extra3 .well .glyphicon-plus-sign").click(function(){$("#add_file_Upload").val(""),$(this).next().trigger("click")}),$("#add_file_Upload").on("change",function(){if(dataListStore.state.bar.flag)return dataListSwalMixin({title:"添加文件提示",text:"只可选一个上传哟，请先提交！",type:"warning",timer:1600,callback:null}),!1;showBarAndOther({fileObj:$(this)[0].files[0]}),dataListStore.state.uploadClassify="select"}),$(".row_extra3>div:nth-child(2)>span.glyphicon-open").click(function(){if(_.isNil(dataListStore.addition.file.value))return!1;var t=new FormData;t.enctype="multipart/form-data",t.append("file",dataListStore.addition.file.value),dataListFileUpload({formData:t})}),$(".row_extra3>div:nth-child(2)>span.glyphicon-remove").click(function(){barDestroy(),dataListStore.addition.file.value=null,dataListStore.state.uploadClassify=null}),$(".isRequired").on("input propertychange change",function(){var t,e=$(this).val(),a=$(this).parents("[data-iparent]").data("iparent");t=_.isNil(e)?"info":""==e.trim()?"info":$(this).is("#futureDT2_update_testEndDate")?/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/.test(e)?e.trim()>moment().format("YYYY-MM-DD")?"info":"ok":"info":"ok",$(this).parents("div.row").find("div.info_div").empty().append('<span class="glyphicon glyphicon-'+t+'-sign" aria-hidden="true"></span>'),additionUpdateIsSubmit(a)}),$(document).on("click",".operate_othertd [data-iicon='glyphicon-eye-open']",function(t){t.stopPropagation();var i=$(this),o=i.data("iid");$.ajax({type:"GET",url:"Examine",data:{waferId:o},dataType:"json"}).then(function(t){if(!0===t){var e=i.parent().siblings(".data_format_td").data("ivalue"),a=i.parent().siblings(".device_number_td").data("ivalue")+"futureDT2OnlineDataListSplitor"+i.parent().siblings(".lot_number_td").data("ivalue")+"futureDT2OnlineDataListSplitor"+i.parent().siblings(".wafer_number_td").data("ivalue")+"futureDT2OnlineDataListSplitor"+i.parent().siblings(".die_type_td").data("ivalue");eouluGlobal.S_settingURLParam({waferId:o,dataFormat:e,webParam:a},!1,!1,!1,"WaferData")}else dataListSwalMixin(!1===t?{title:"查看详细信息提示",text:"无被测Die数据，不能访问",type:"warning",timer:2e3,callback:null}:{title:"查看详细信息提示",text:t.replace(/^"/,"").replace(/"$/,""),type:"warning",timer:2e3,callback:null})})}),$(".g_bodyin_bodyin_tit_l>[data-iicon='glyphicon-trash']").click(function(){eouluGlobal.S_settingURLParam({},!1,!1,!1,"RecycleBin")});var dropFileCon=document.getElementById("dropFileCon");dropFileCon.ondragover=function(t){return t.preventDefault(),this.style.backgroundColor="#ddd",!(this.getElementsByTagName("small")[0].innerText="释放鼠标，立即上传！")},dropFileCon.ondragenter=function(t){return t.preventDefault(),this.style.backgroundColor="#ddd",!(this.getElementsByTagName("small")[0].innerText="释放鼠标，立即上传！")},dropFileCon.ondragleave=function(t){return t.preventDefault(),this.style.backgroundColor="#f5f5f5",!(this.getElementsByTagName("small")[0].innerText="支持Excel、TXT、zip、rar格式")},dropFileCon.ondrop=function(t){t.preventDefault();var e=t.dataTransfer.files,a=!1;if(console.table&&console.table(e),e.length<1?a=!0:1<e.length&&(dataListSwalMixin({title:"拖拽上传提示",text:"一次只能选择一个文件",type:"info",timer:1600,callback:null}),a=!0),a)return dropFileCon.style.backgroundColor="#f5f5f5",!(dropFileCon.getElementsByTagName("small")[0].innerText="支持Excel、TXT、zip、rar格式");var i=e[0],o=new FormData;return dataListStore.addition.file.value=i,dataListStore.state.uploadClassify="drop",o.enctype="multipart/form-data",o.append("file",i),showBarAndOther({fileObj:i}),dataListFileUpload({formData:o,successOther:function(){dropFileCon.style.backgroundColor="#f5f5f5",dropFileCon.getElementsByTagName("small")[0].innerText="支持Excel、TXT、zip、rar格式"},errorOther:function(){dropFileCon.style.backgroundColor="#f5f5f5",dropFileCon.getElementsByTagName("small")[0].innerText="支持Excel、TXT、zip、rar格式"}}),!1};