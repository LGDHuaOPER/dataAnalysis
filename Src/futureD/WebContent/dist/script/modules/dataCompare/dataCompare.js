var dataCompareSwalMixin=swal.mixin({confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!0,animation:!1,customClass:"animated zoomIn"}),dataCompareState=new Object;dataCompareState.paginationObj={normal:null,search:null},dataCompareState.pageObj={selector:null,pageOption:null,currentPage:null,pageCount:null,itemLength:null,data:null},dataCompareState.pageSearchObj={selector:"#pagelist",pageOption:{limit:10,count:0,curr:0,ellipsis:!0,pageShow:2,hash:!1,callback:function(a){(dataCompareState.pageSearchObj.currentPage=a.curr,a.isFirst)||dataCompareRenderData({chunkArr:getdataCompareData(dataCompareState.searchObj.searchVal),currentPage:dataCompareState.pageSearchObj.currentPage})}},currentPage:null,pageCount:null,itemLength:null,data:null},dataCompareState.searchObj={hasSearch:!1,searchVal:null},dataCompareState.sellectObj={selectAll:!1,selectItem:[],selectSearchItem:[]},dataCompareState.stateObj={canClickParam:!1,curParam:null,curChartContainerNum:0,searchShow:!0,allChoose:!1,curWaferChange:!1},dataCompareState.chartTypeMap={good_rate:"spline",histogram:"column",boxlinediagram:"boxplot",CPK:"line",correlationgraph:"scatter"},dataCompareState.chartAjaxUrl={good_rate:"ShowYield",histogram:"Histogram",boxlinediagram:"Boxplot",CPK:"CPKServlet",correlationgraph:"scatter"};var dataListDetailStore=Object.create(null);function draw_other_chart(e){var a,t,r,o=e.chartType,i=e.classify,n=e.IDParamObj,l=(e.paramsArr,e.data),s=e.errorArr,d=e.curWaferId,p=e.curWaferName,c=n.id,m=n.param;n.isAll;switch(i){case"histogram":var h=_.find(l,function(a,t){return _.toString(t)==_.toString(m)});a="直方图-"+m,t={categories:_.map(h.sectionX,function(a,t){var e=a.split("~");return _.forEach(e,function(a,t,e){var r;r=-1<a.indexOf("∞")?a:8<a.length?numeral(a).format("0.0000e+0"):a,e[t]=r}),_.join(e,"~")}),type:"linear",labels:{rotation:-45},plotLines:[{color:"#FF0000",width:2,value:.5},{color:"#FF0000",width:2,value:h.sectionX.length-1.5}]},r={title:{text:"百分数"}};var u,g=[];for(var f in h.percentList)u=h.percentList[f],g.push({name:p[f],type:"column",data:_.map(u.percent,function(a){return parseFloat(a)})});C=g;break;case"boxlinediagram":for(var b=[],v=0;v<d.length;v++)b.push(p[d[v]]);a="箱线图-"+m,t={categories:b},r={title:{text:"值"}};h=_.find(l,function(a,t){return _.toString(t)==_.toString(m)});var C=[],y=[],S=[],x=[];for(var f in h)y.push(h[f].eigenValue),S=h[f].extreme,x=h[f].soft;C=[{name:"观测值",data:y,tooltip:{headerFormat:"<em>参数： {point.key}</em><br/>"}},{name:"极端异常值",color:Highcharts.getOptions().colors[0],type:"scatter",data:S,marker:{fillColor:"white",lineWidth:1,lineColor:Highcharts.getOptions().colors[0]},tooltip:{pointFormat:"极端异常值: {point.y}"}},{name:"温和异常值",color:Highcharts.getOptions().colors[1],type:"scatter",data:x,marker:{fillColor:"#ccc",lineWidth:1,lineColor:Highcharts.getOptions().colors[1]},tooltip:{pointFormat:"温和异常值: {point.y}"}}];break;case"CPK":for(var w=[],O=(h=_.find(l,function(a,t){return _.toString(t)==_.toString(m)}),0);O<e.curWaferId.length;O++){var j=_.find(h,function(a,t){return _.toString(t)==_.toString(e.curWaferId[O])}),k=e.curWaferName[e.curWaferId[O]];if(j.length<20){var N=_.find(s,function(a,t){return"CPK图"==a.chartCNName});_.isNil(N)?s.push({chartCNName:"CPK图",errorParamArr:[k+":"+m],classify:i,message:"参数数据不足"}):N.errorParamArr.push(k+":"+m)}else{var P={};P.name=p[e.curWaferId[O]],P.data=h[e.curWaferId[O]],w.push(P)}}a="CPK-"+m,t={categories:["一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十"]},r={title:{text:"values"}},C=w;break;case"correlationgraph":var D;for(var F in a="相关性图-"+m,p)if(m===p[F]){D=F;break}h=_.find(l,function(a,t){return _.toString(t)==_.toString(D)});t={title:{enabled:!0,text:$(".right_div .list-group-item-info").eq(0).data("iparam"),style:{fontSize:"16px",fontFamily:"arial",float:"top"}},lineWidth:1,startOnTick:!0,endOnTick:!0,showLastLabel:!0,labels:{useHTML:!0,formatter:function(){return"<a href=\"javascript:alert('hello')\">"+this.value+"</a>"}}},r={title:{text:$(".right_div .list-group-item-info").eq(1).data("iparam")}},(M={}).name=m;for(var q=[],A=0;A<h.X.length;A++){var I=[];I.push(parseFloat(h.X[A])),I.push(parseFloat(h.Y[A])),q.push(I)}M.data=q,C=[M];break;default:var M;a="良品率图",(M={}).name=m,M.data=[];var T=[];h=_.find(l,function(a,t){return _.toString(t)==_.toString(m)});for(var f in h){T.push(p[f]);var L=parseFloat(h[f]);M.data.push(L)}t={categories:T},r={title:{text:"比率(%)"},min:0,max:100,tickInterval:10,labels:{formatter:function(){return this.value}}},C=[M]}return dataCompareRenderChart({container:c,chart:{zoomType:"x",type:o},title:{text:a},subtitle:{text:null},xAxis:t,yAxis:r,series:_.cloneDeep(C),chartClassify:i,callback:null}),s}function draw_map_good_rate(a){var t=a.data,e=a.IDParamObj.wafer;if(_.isNil(e))return!1;var r=a.IDParamObj,o=$("#"+r.id),i=o.innerWidth();o.innerHeight(.8*i);var n="canvas_"+o.attr("id");o.append("<canvas id='"+n+"'></canvas>"),o.append("<div class='criterion_"+n+"'></div>");var l=_.find(t,function(a,t){return _.toString(t)==_.toString(e)}),s=[],d=_.find(l.waferList,function(a,t){return _.toString(a.parameter)==_.toString(r.param)});_.forOwn(d.currentDieList,function(a,t){var e={};e[t]=a,s.push(e)}),_.forOwn(l.otherDieType,function(a,t){var e={};e[t]=a,s.push(e)}),buildColorGradation({width:i,height:.8*i,container:n,bgFillColor:"#314067",waferData:l,spacePercent:{x:.1,y:0},m_DieDataListNew:s,colorGradation:{limitColor:"#FF0000",floorColor:"#00FF00",nums:256},callback:function(a,t){}})}function draw_map_color_order_distribution(a){console.log("draw_map_color_order_distribution",a);var t=a.data,e=a.IDParamObj,r=e.wafer,o=$("#"+e.id),i=_.find(t,function(a,t){return _.toString(t)==_.toString(r)}),c=[],n=_.find(i.waferList,function(a,t){return _.toString(a.parameter)==_.toString(e.param)}),m=200,h=-100,u=h+_.floor(100),g=h+2*_.floor(100),f=_.floor(50),b={},l=u-h,s=f-u,d=g-f,p=m-g;_.forEach([n.currentDieList,i.otherDieType],function(a,t){_.forOwn(a,function(a,t){var e,r,o,i,n,l={};n=_.isObject(a)?(i=a.percent,a.bin):i=a,e=_.round(parseFloat(i)*Math.pow(10,0));var s=_.toString(i).match(/^\+/),d=_.toString(i).match(/^\-/);if(_.isObject(a)?_.isNil(s)&&_.isNil(d)?o=1:(_.isNil(s)||(o=100),_.isNil(d)||(o=-100)):_.isNil(s)&&_.isNil(d)?o=0:(_.isNil(s)||(o=2),_.isNil(d)||(o=-2)),2<o&&(e+=o),5e3==(r=n))"5000:"in b||(b["5000:"]="#FDFDFD"),l[t]={bin:5e3,color:"5000:"};else if(5001==r)"5001:"in b||(b["5001:"]="#fff"),l[t]={bin:5001,color:"5001:"};else if(-1==r)"-1:"in b||(b["-1:"]="#314067"),l[t]={bin:-1,color:"-1:"};else{var p=_.round(e);_.isNil(s)&&_.isNil(d)?u<=e&&e<f?l[t]={bin:r,color:"3:"+p}:f<=e&&e<=g&&(l[t]={bin:r,color:"4:"+p}):(_.isNil(s)||(g<=e&&e<m?l[t]={bin:r,color:"5:"+p}:m<=e&&(e=m,l[t]={bin:r,color:"6:"+p})),_.isNil(d)||(e<=h?(e=h,l[t]={bin:r,color:"1:"+p}):h<e&&e<=u&&(l[t]={bin:r,color:"2:"+p})))}c.push(l)})});var v=o.innerWidth();o.innerHeight(.8*v);var C="canvas_"+o.attr("id");o.append("<canvas id='"+C+"'></canvas>"),o.after("<div class='criterion_"+C+"'><div class='colorGradient'></div></div>"),buildColorGradation({width:v,height:.8*v,container:C,bgFillColor:"#314067",waferData:i,spacePercent:{x:.1,y:0},m_DieDataListNew:c,colorGradation:{theMinColor:"#0000FF",lowwerColor:"#00FFFF",midderColor:"#00FF00",upperColor:"#FFFF00",theMaxColor:"#FF0000",twoDiff:l,threeDiff:s,fourDiff:d,fiveDiff:p},colorOrder:!0,theMin:h,lowwer:u,midder:f,upper:g,theMax:m,otherColor:b});var y=o.next().find("div.colorGradient");y.width(o.next().width()-60).height(o.next().height()-30);var S=l+s+d+p,x=y.height(),w=y.width()/(1.2*S),O=_.floor(1.5);$("body").innerWidth()<1920&&(O+=.5),$("body").innerWidth()<1366&&(O+=.5),y.append("<span class='colorGradientSpan oneSpan outSpan'><span style='height: "+x+"px; width: "+w+"px'></span></span>"),y.append("<span class='colorGradientSpan splitSpan' style='height: "+x+"px; width: "+w*O+"px;'></span>"),_.times(l,function(a){var t=getGradientColor("#00FFFF","#0000FF",l,l-a);y.append("<span class='colorGradientSpan' data-icolor='"+t+"' style='background: "+t+"; height: "+x+"px; width: "+w+"px'></span>")}),y.append("<span class='colorGradientSpan twoSpan outSpan'><span style='height: "+x+"px; width: "+w+"px'></span></span>"),y.append("<span class='colorGradientSpan splitSpan' style='height: "+x+"px; width: "+w*O+"px;'></span>"),_.times(s,function(a){var t=getGradientColor("#00FF00","#00FFFF",s,s-a);y.append("<span class='colorGradientSpan' data-icolor='"+t+"' style='background: "+t+"; height: "+x+"px; width: "+w+"px'></span>")}),y.append("<span class='colorGradientSpan threeSpan outSpan'><span style='height: "+x+"px; width: "+w+"px'></span></span>"),y.append("<span class='colorGradientSpan splitSpan' style='height: "+x+"px; width: "+w*O+"px;'></span>"),_.times(d,function(a){var t=getGradientColor("#FFFF00","#00FF00",d,d-a);y.append("<span class='colorGradientSpan' data-icolor='"+t+"' style='background: "+t+"; height: "+x+"px; width: "+w+"px'></span>")}),y.append("<span class='colorGradientSpan fourSpan outSpan'><span style='height: "+x+"px; width: "+w+"px'></span></span>"),y.append("<span class='colorGradientSpan splitSpan' style='height: "+x+"px; width: "+w*O+"px;'></span>"),_.times(p,function(a){var t=getGradientColor("#FF0000","#FFFF00",p,p-a);y.append("<span class='colorGradientSpan' data-icolor='"+t+"' style='background: "+t+"; height: "+x+"px; width: "+w+"px'></span>")}),y.append("<span class='colorGradientSpan fiveSpan outSpan'><span style='height: "+x+"px; width: "+w+"px'></span></span>"),y.append("<span class='colorGradientSpan splitSpan' style='height: "+x+"px; width: "+w*O+"px;'></span>"),y.append("<span class='colorGradientSpan sixSpan outSpan'><span style='height: "+x+"px; width: "+w+"px'></span></span>");var j=_.countBy(c,function(a,t){var e;return _.forOwn(a,function(a,t){e=a.color.split(":")[0]}),e});$('<table class="table table-striped table-bordered table-condensed"><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th><th>合格数</th><th>不合格数</th><th>良率</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td class="qualify_tt" data-ipara="qualify">0</td><td class="unqulify_tt" data-ipara="unqulify">0</td><td class="yield_tt" data-ipara="yield">0%</td></tr></tbody></table>').appendTo(o.parent().next()),_.forOwn(j,function(a,t){if(-1==_.indexOf(["1","2","3","4","5","6"],t))return!0;o.parent().next().find("th").eq(t-1).text(t+"区间"),o.parent().next().find("td").eq(t-1).text(a+"个")});var k=o.parent().next();k.find("[class$='_tt']").each(function(){var a=$(this).data("ipara");$(this).text(n[a])}),k.find("th").each(function(a){""==$(this).text().trim()&&($(this).text(a+1+"区间"),k.find("td").eq(a).text("0个"))})}function findParamUpLow(e){var a={};if("ALL"==e.toLocaleUpperCase())a.up="无",a.low="无";else{var t=$("body").data("result").paramLimit,r=_.findIndex(t.paramList,function(a,t){return a.replace(/\([\s\S]*\)$/,"")==e});a.low=-1==r?a.up="无":(a.up=t.upperList[r],t.lowerList[r])}return _.cloneDeep(a)}function buildParameterChartContainer(a){console.log("obj",a);var r=a.classify,t=a.paramsArr,o='<div class="container-fluid">',i=[];if(-1<["good_rate","histogram","boxlinediagram","CPK","correlationgraph"].indexOf(r))-1<["histogram"].indexOf(r)&&(t=_.pull(t,"sectionX")),_.forEach(t,function(a,t,e){t%2==0&&(o+='<div class="row">'),o+='<div class="col-sm-12 col-md-6 col-lg-6">',o+='<div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>'+a+'</div><div class="panel-body"><div class="container-fluid"><div class="chart_title"></div><div class="chart_body"><div id="'+(r+dataListDetailStore.state.parameterMap.curChartContainerNum)+'" data-iparam="'+a+'"></div></div><div class="chart_foot"></div></div></div></div>',o+="</div>",(t%2==1||t%2==0&&t==e.length-1)&&(o+="</div>"),i.push({id:r+dataListDetailStore.state.parameterMap.curChartContainerNum,param:a,isAll:!1}),dataListDetailStore.state.parameterMap.curChartContainerNum++}),o+="</div>";else if(-1<["map_good_rate_distribution","map_color_order_distribution"].indexOf(r)){for(var e=0;e<t.length;e++){o+='<div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>'+t[e]+'</div><div class="panel-body"><div class="container-fluid">';for(var n=0;n<a.waferArr.length;n++)n%2==0&&(o+='<div class="row">'),o+='<div class="col-sm-12 col-md-6 col-lg-6">',o+='<div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>'+a.curWaferName[a.waferArr[n]]+'</div><div class="panel-body"><div class="container-fluid"><div class="chart_title"></div><div class="chart_body"><div id="'+(r+dataListDetailStore.state.parameterMap.curChartContainerNum)+'" data-iparam="'+t[e][n]+'"></div></div><div class="chart_foot"></div></div></div></div>',o+="</div>",(n%2==1||n%2==0&&n==a.waferArr.length-1)&&(o+="</div>"),i.push({id:r+dataListDetailStore.state.parameterMap.curChartContainerNum,param:t[e],isAll:!1,wafer:a.waferArr[n]}),dataListDetailStore.state.parameterMap.curChartContainerNum++;o+="</div></div></div>"}o+="</div>"}return"all_statistics"==a.controls?$("#all_statistics .panel_"+r+">.panel-body").append(o):$("#"+r+" .single_div_in").append(o),i}function ajax_all_chart(n){for(var l=n.times,s=n.alltimes,d=n.whenArr,p=n.errorArr||[],c=n.curWaferName,m=d[l],h=[],u=[],a=[],t=0;t<$(".home_dataCompare_bottom table tbody tr").length;t++)h.push($(".home_dataCompare_bottom table tbody  tr").eq(t).find("input[type='checkbox']").data("ivalue"));for(t=0;t<$(".home_dataCompare_bottom .right_div  li").length;t++)$(".home_dataCompare_bottom .right_div  li").eq(t).hasClass("list-group-item-info")&&(0!=t&&a.push($(".home_dataCompare_bottom .right_div  li").eq(t).data("iparam")),u.push($(".home_dataCompare_bottom .right_div  li").eq(t).data("iparam")));if("correlationgraph"===m.classify)var e={waferIdStr:h.join(","),paramX:$(".home_dataCompare_bottom .right_div  li.list-group-item-info").eq(0).data("iparam"),paramY:$(".home_dataCompare_bottom .right_div  li.list-group-item-info").eq(1).data("iparam"),minX:$(".home_dataCompare_bottom .right_div  li.list-group-item-info").eq(0).data("min"),minY:$(".home_dataCompare_bottom .right_div  li.list-group-item-info").eq(1).data("min"),maxX:$(".home_dataCompare_bottom .right_div  li.list-group-item-info").eq(0).data("max"),maxY:$(".home_dataCompare_bottom .right_div  li.list-group-item-info").eq(1).data("max")};else e={waferIdStr:h.join(","),paramAtt:a};$.ajax({type:"GET",url:m.chartAjaxUrl,data:e,dataType:"json",beforeSend:function(){$("body").data("iglobalerror","allow"),$("#swal2-content").text("正在请求"+m.chartCNName+"数据，绘图进度 "+(l+1)+"/"+s)}}).then(function(e){if(_.isEmpty(e)||_.isNil(e))p.push({chartCNName:m.chartCNName,errorParamArr:[],classify:m.classify,message:"数据为空"});else{var r;if(-1<["map_good_rate_distribution","map_color_order_distribution"].indexOf(m.classify)){var a=[];for(var t in r=u,e)a.push(t)}else if(-1<["good_rate"].indexOf(m.classify))r=u;else if(-1<["correlationgraph"].indexOf(m.classify))for(var o in delete e.status,r=[],c)r.push(c[o]);else r=_.keys(e),r=_.sortBy(r,function(a,t){return _.isNil(a.match(/\d+/))?0:_.toNumber(a.match(/\d+/)[0])});var i=buildParameterChartContainer({classify:m.classify,paramsArr:_.cloneDeep(r),waferArr:_.cloneDeep(a),curWaferName:c,controls:n.controls});_.forEach(i,function(a,t){"map_good_rate_distribution"==m.classify?draw_map_good_rate({IDParamObj:a,data:_.cloneDeep(e),curWaferName:c,paramsArr:r}):"map_color_order_distribution"==m.classify?draw_map_color_order_distribution({data:_.cloneDeep(e),IDParamObj:a,curWaferName:c,paramsArr:r}):p=draw_other_chart({chartType:m.chartType,classify:m.classify,IDParamObj:a,paramsArr:r,data:_.cloneDeep(e),curWaferId:h,errorArr:p,curWaferName:c})})}++l!=s?setTimeout(function(){ajax_all_chart({times:l,alltimes:s,whenArr:d,curWaferName:c,errorArr:p,controls:n.controls})},50):eouluGlobal.S_getSwalMixin()({title:"加载提示",text:"数据请求完成",type:"info",showConfirmButton:!1,timer:1200}).then(function(){if(_.isEmpty(p))eouluGlobal.S_getSwalMixin()({title:"加载提示",text:"全部图表绘制完成",type:"success",showConfirmButton:!1,timer:1200});else{var e="部分图表绘制完成，以下图表请求/绘制失败";e+='<div class="container-fluid"><table class="table table-striped table-bordered table-hover table-condensed"><thead><tr><th style="font-size:14px;width: 80px;text-align:center;">图表名字</th><th style="font-size:14px;text-align:center;">参数及原因</th></tr></thead><tbody>',_.forEach(p,function(t){e+='<tr><td style="vertical-align: top;font-size:14px;width: 80px;">'+t.chartCNName+'</td><td style="vertical-align: top;font-size:14px;">',_.isEmpty(t.errorParamArr)?e+=t.message:_.forEach(t.errorParamArr,function(a){e+=a+":"+t.message+"<br/>"}),e+="</td></tr>"}),e+="</tbody></table></div>",eouluGlobal.S_getSwalMixin()({title:"加载提示",html:e,showConfirmButton:!0})}$("body").data("iglobalerror","unallow"),dataListDetailStore.state.parameterMap.hasRender=!0})},function(){eouluGlobal.S_getSwalMixin()({title:"加载提示",text:m.chartCNName+"数据请求失败，请刷新页面或重新登录",type:"error",showConfirmButton:!1,timer:1800})}).always(function(){})}function dataCompareRenderData(a){var t=$("#search_input").val().trim();$.ajax({url:"DataListAjax",type:"GET",data:{currentPage:a,keyword:t},dataType:"json",async:!1,success:function(a){console.log("data",a);var i="";a.waferInfo.map(function(a,t,e){var r=a.wafer_id;if(a.test_operator)o=a.test_operator;else var o="";i+='<tr><td class="not_search"><input type="checkbox" data-ivalue="'+r+'"></td><td class="product_category" data-itext="'+a.product_category+'">'+a.product_category+'</td><td class="device_number" data-itext="'+a.device_number+'">'+a.device_number+'</td><td class="lot_number" data-itext="'+a.lot_number+'">'+a.lot_number+'</td><td class="wafer_number" data-itext="'+a.wafer_number+'">'+a.wafer_number+'</td><td class="die_type" data-itext="'+a.die_type+'">'+a.die_type+'</td><td class="qualified_rate" data-itext="'+a.qualified_rate+'">'+a.qualified_rate+'</td><td class="test_end_date" data-itext="'+a.test_end_date+'">'+a.test_end_date+'</td><td class="test_operator" data-itext="'+o+'">'+o+'</td><td class="description" data-itext="'+a.description+'">'+a.description+'</td><td class="data_format" data-itext="'+a.data_format+'" style="display:none;">'+a.data_format+'</td><td class="data_trash not_search"><img src="assets/img/common/del_24px.svg"  data-iicon="glyphicon-remove" alt="删除" title="删除" ></td></tr>'}),$(".home_dataCompare_top tbody").empty().append(i),dataCompareState.pageObj.pageCount=a.totalPage,dataCompareState.pageObj.itemLength=a.totalCount,dataCompareState.pageObj.data=a.waferInfo,dataCompareState.searchObj.hasSearch?(dataCompareState.searchObj.searchVal=t,$(".home_dataCompare_top tbody [type='checkbox']").each(function(){-1<_.indexOf(dataCompareState.sellectObj.selectItem,$(this).data("ivalue").toString())&&$(this).prop("checked",!0).parent().parent().addClass("warning").removeClass("info")}),$(".home_dataCompare_top tbody td:not(.not_search)").each(function(){var a=$(this).text(),t="<b style='color:red'>"+dataCompareState.searchObj.searchVal+"</b>",e=a.replace(new RegExp(dataCompareState.searchObj.searchVal,"g"),t);$(this).empty().html(e)})):$(".home_dataCompare_top tbody [type='checkbox']").each(function(){-1<_.indexOf(dataCompareState.sellectObj.selectItem,$(this).data("ivalue").toString())&&$(this).prop("checked",!0).parent().parent().addClass("warning").removeClass("info")}),$("#checkAll").prop("checked",dataCompareState.pageObj.itemLength==dataCompareState.sellectObj.selectItem.length)},error:function(a,t,e){dataCompareSwalMixin({title:"异常",text:"服务器繁忙！",type:"error",showConfirmButton:!1,timer:2e3})}})}function eleResize(){var a=$(window).height();a<600&&(a=600),$("body").height(a),$(".g_bodyin_bodyin_bottom").innerHeight(a-165),$(".g_bodyin_bodyin_bottom>.tab-content").innerHeight(a-165),$(".home_dataCompare_top .body_div").innerHeight(a/2-83),$(".home_dataCompare_bottom .left_div, .home_dataCompare_bottom .right_div").innerHeight(a/2-92),$(".home_dataCompare_bottom .right_div .panel-body").innerHeight(a/2-175)}function judgeNav(a){{if("wafer"==a.classify)return 0==dataCompareState.sellectObj.selectItem.length?($(".g_bodyin_bodyin_top_wrap>ul").empty().append('<li role="presentation" class="active"><a href="#home_dataCompare" aria-controls="home_dataCompare" role="tab" data-toggle="tab">主页面</a></li>'),dataCompareState.stateObj.canClickParam=!1,dataCompareState.stateObj.curParam=null,!1):(dataCompareState.stateObj.canClickParam=!0,judgeNav({classify:"param",param:{TotalYield:a.param.TotalYield,other:_.cloneDeep(a.param.other)}}));if("param"==a.classify){var t=[];return dataCompareState.stateObj.curParam=_.cloneDeep(a.param),0==a.param.TotalYield?0==a.param.other.length?t.length=0:2==a.param.other.length?t=_.cloneDeep([{href:"map_good_rate_distribution",text:"Map良率分布",value:44},{href:"map_color_order_distribution",text:"Map色阶分布",value:45},{href:"good_rate",text:"良品率图",value:46},{href:"histogram",text:"直方图",value:47},{href:"boxlinediagram",text:"箱线图",value:48},{href:"CPK",text:"CPK图",value:49},{href:"correlationgraph",text:"相关性图",value:50}]):2!=a.param.other.length&&(t=_.cloneDeep([{href:"map_good_rate_distribution",text:"Map良率分布",value:44},{href:"map_color_order_distribution",text:"Map色阶分布",value:45},{href:"good_rate",text:"良品率图",value:46},{href:"histogram",text:"直方图",value:47},{href:"boxlinediagram",text:"箱线图",value:48},{href:"CPK",text:"CPK图",value:49}])):t=[{href:"map_good_rate_distribution",text:"Map良率分布",value:44},{href:"good_rate",text:"良品率图",value:46}],t}}}function renderNav(a){if(!1!==a){var r='<li role="presentation" class="active" ischange ="false"><a href="#home_dataCompare" aria-controls="home_dataCompare" role="tab" data-toggle="tab">主页面</a></li>',o=eouluGlobal.S_getCurPageJudgedAuthority().diff,i=!1;a.map(function(e,a,t){if(_.find(o,function(a,t){return a[0].value==e.value}))return!0;r+='<li role="presentation" ischange ="false"><a href="#'+e.href+'" aria-controls="'+e.href+'" data-controls="'+e.href+'" role="tab" data-toggle="tab">'+e.text+"</a></li>",i=!0}),!_.isEmpty(a)&&i&&(r+='<li role="presentation" ischange ="false"><a href="#all_statistics" aria-controls="all_statistics" role="tab" data-toggle="tab">所有统计</a></li>'),$(".g_bodyin_bodyin_top_wrap>ul").empty().append(r)}}function groupJudgeRenderNav(a){var t=[];$("#home_param_ul>li.list-group-item-info:not([data-iparam='Total Yield'])").each(function(){t.push($(this).data("iparam"))}),renderNav(judgeNav({classify:a,param:{TotalYield:$("#home_param_ul>li.list-group-item-info[data-iparam='Total Yield']").length,other:_.cloneDeep(t)}}))}function renderCommonParameter(){var a=dataCompareState.sellectObj.selectItem.join(",");""!=a?$.ajax({url:"ParameterRange",type:"GET",data:{waferIdStr:a},dataType:"json",success:function(a){var t="";if(0!=a.paramList.length){t='<li class="list-group-item" data-iparam="Total Yield"><span class="badge">选中</span>Total Yield</li>';for(var e=0;e<a.paramList.length;e++)t+='<li class="list-group-item" data-iparam="'+a.paramList[e]+'" data-min="'+a.rangeList[a.paramList[e]][0]+'" data-max="'+a.rangeList[a.paramList[e]][1]+'"><span class="badge">选中</span>'+a.paramList[e]+"</li>"}else t='<li class="list-group-item" data-iparam="Total Yield"><span class="badge">选中</span>Total Yield</li>';$("#home_param_ul").empty().append(t),$(".home_dataCompare_bottom .right_div .allchoose").text("全选").prop("ischoose",!1)},error:function(a,t,e){dataCompareSwalMixin({title:"异常",text:"服务器繁忙！",type:"error",showConfirmButton:!1,timer:2e3})}}):$("#home_param_ul").empty()}function renderPanel(a,t,e,r,o){var i="";if("map_good_rate_distribution"==e||"map_color_order_distribution"==e){if(1==a&&"map_good_rate_distribution"==e){i+='<div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>Total Yield</div><div class="panel-body"><div class="container-fluid">';var n=buildMapContainer({divi:3,controls:e,iparam:"TotalYield",iclassify:"map"});i+=n,i+="</div></div></div>"}t.map(function(a,t){i+='<div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>'+a+'</div><div class="panel-body"><div class="container-fluid">',i+=buildMapContainer({divi:3,controls:e,iparam:a,iclassify:"map"}),i+="</div></div></div>"})}else if("good_rate"==e){var l=2;(6<dataCompareState.sellectObj.selectItem.length||1==dataCompareState.stateObj.curParam.other.length)&&(l=1),i=buildMapContainer({divi:l,controls:e,iparam:null,iclassify:"otherSingle"})}else if(-1<["histogram","boxlinediagram","CPK"].indexOf(e)){var s=2;(6<dataCompareState.sellectObj.selectItem.length||1==dataCompareState.stateObj.curParam.other.length)&&(s=1),i=buildMapContainer({divi:s,controls:e,iparam:null,iclassify:"otherSingleNotTY"})}else"correlationgraph"==e&&(i=buildMapContainer({divi:1,controls:e,iparam:dataCompareState.stateObj.curParam.other.join(" VS "),iclassify:"correlationgraph"}));!0===r?o&&o(i):$("div[role='tabpanel']#"+e+">.single_div_in").empty().append(i)}function buildMapContainer(a){var r="",o=a.divi,i=a.controls,n=a.iparam,t=a.iclassify;if("otherSingle"==t||"otherSingleNotTY"==t){var e=[];"otherSingle"==t&&(e[dataCompareState.stateObj.curParam.TotalYield]="TotalYield",_.pullAt(e,0));var l=_.concat(e,dataCompareState.stateObj.curParam.other),s=Math.ceil(l.length/o),d=_.join(_.sortBy(dataCompareState.sellectObj.selectItem));r+='<div class="container-fluid">',_.times(s,function(e){r+='<div class="row">',_.times(o,function(a){var t=e*o+a;t<l.length&&(r+='<div class="col-sm-12 col-md-'+12/o+" col-lg-"+12/o+'">',r+='<div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>'+l[t]+'</div><div class="panel-body"><div class="chart_otherSingle_tit">头</div><div class="chart_otherSingle_body"><div id="'+(i+dataCompareState.stateObj.curChartContainerNum)+'" data-ivalue="'+d+'" data-ichart="'+i+'" data-iparam="'+l[t]+'"></div></div><div class="chart_otherSingle_foot">脚</div></div></div>',r+="</div>",dataCompareState.stateObj.curChartContainerNum++)}),r+="</div>"}),r+="</div>"}else if("map"==t){var p=dataCompareState.sellectObj.selectItem.length,c=Math.ceil(p/o);_.times(c,function(e){r+='<div class="row">',_.times(o,function(a){var t=e*o+a;t<p&&(r+='<div class="col-sm-6 col-md-'+12/o+" col-lg-"+12/o+'">',r+='<div class="chart_map_tit">wafer'+dataCompareState.sellectObj.selectItem[t]+"</div>",r+='<div class="chart_map_body"><div id="'+(i+dataCompareState.stateObj.curChartContainerNum)+'" data-ivalue="'+dataCompareState.sellectObj.selectItem[t]+'" data-ichart="'+i+'" data-iparam="'+n+'"></div></div>',r+='<div class="chart_map_foot"></div>',r+="</div>",dataCompareState.stateObj.curChartContainerNum++)}),r+="</div>"})}else if("correlationgraph"==t){var m=_.join(_.sortBy(dataCompareState.sellectObj.selectItem));r+='<div class="container-fluid"><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><div class="panel panel-info"><div class="panel-heading"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>'+n+'</div><div class="panel-body"><div class="chart_otherSingle_tit">头</div><div class="chart_otherSingle_body"><div id="'+(i+dataCompareState.stateObj.curChartContainerNum)+'" data-ivalue="'+m+'" data-ichart="'+i+'" data-iparam="'+n+'"></div></div><div class="chart_otherSingle_foot">脚</div></div></div></div></div></div>',dataCompareState.stateObj.curChartContainerNum++}return r}dataListDetailStore.state=Object.create(null),dataListDetailStore.state={allDetail:{tbody:{scrollTop:0,scrollLeft:0}},parameterMap:{curChartContainerNum:0,hasRender:!1,ajaxLength:0},chartTypeMap:{map_good_rate_distribution:null,map_color_order_distribution:null,good_rate:"spline",histogram:"column",boxlinediagram:"boxplot",CPK:"line",correlationgraph:"scatter"},chartAjaxUrlMap:{map_good_rate_distribution:"WaferMap",map_color_order_distribution:"ColorMap",good_rate:"ShowYield",histogram:"Histogram",boxlinediagram:"Boxplot",CPK:"CPKServlet",correlationgraph:"Correlation"},chartCNNameMap:{map_good_rate_distribution:"Map良率分布",map_color_order_distribution:"Map色阶分布",good_rate:"良品率图",histogram:"直方图",boxlinediagram:"箱线图",CPK:"CPK图",correlationgraph:"相关性图"}},$(document).on("shown.bs.tab",'div.g_bodyin_bodyin_top_wrap a[data-toggle="tab"]',function(a){if("true"==$(this).parent().attr("ischange"))return!0;$(this).parent().attr("ischange","true");for(var t=[],o={},e=0;e<$(".home_dataCompare_bottom table tbody tr").length;e++)t.push($(".home_dataCompare_bottom table tbody  tr").eq(e).find("input[type='checkbox']").data("ivalue")),o[$(".home_dataCompare_bottom table tbody  tr").eq(e).find("input[type='checkbox']").data("ivalue")]=$(".home_dataCompare_bottom table tbody  tr").eq(e).find(".wafer_number").text();dataCompareState.stateObj.curParam;var i=$(a.target).attr("aria-controls");if($(".g_info_m, .g_info_r .glyphicon-search, .g_info .glyphicon-question-sign").hide(),"home_dataCompare"==i)$(".g_info_m, .g_info .glyphicon-question-sign").show(),dataCompareState.stateObj.searchShow&&$(".g_info_r .glyphicon-search").show();else if("all_statistics"==i){eouluGlobal.S_getSwalMixin()({title:"加载数据",text:"数据加载绘制图形中...",type:"info",showConfirmButton:!1,showCancelButton:!1}),$("#all_statistics>.panel").hide();for(var r=1;r<$(".g_bodyin_bodyin_top_wrap>ul li").length-1;r++){var n=$(".g_bodyin_bodyin_top_wrap>ul li").eq(r).find("a").data("controls");$("#all_statistics .panel_"+n).show()}$("#all_statistics>.panel>.panel-body").empty(),setTimeout(function(){var n=[];$("#all_statistics>div.panel").each(function(a,t){if("none"==$(this).css("display"))return!0;var e=$(t).data("iallstatistics"),r=_.find(dataListDetailStore.state.chartTypeMap,function(a,t){return t==e}),o=_.find(dataListDetailStore.state.chartAjaxUrlMap,function(a,t){return t==e}),i=_.find(dataListDetailStore.state.chartCNNameMap,function(a,t){return t==e});n.push({chartType:r,chartAjaxUrl:o,chartCNName:i,classify:e})}),ajax_all_chart({times:0,alltimes:n.length,whenArr:_.cloneDeep(n),curWaferName:o,controls:"all_statistics"})},50)}else eouluGlobal.S_getSwalMixin()({title:"加载数据",text:"数据加载绘制图形中...",type:"info",showConfirmButton:!1,showCancelButton:!1}),setTimeout(function(){$("#"+i+" .single_div_in").empty();var a=_.find(dataListDetailStore.state.chartTypeMap,function(a,t){return t==i}),t=_.find(dataListDetailStore.state.chartAjaxUrlMap,function(a,t){return t==i}),e=_.find(dataListDetailStore.state.chartCNNameMap,function(a,t){return t==i}),r=[];r.push({chartType:a,chartAjaxUrl:t,chartCNName:e,classify:i}),ajax_all_chart({times:0,alltimes:r.length,whenArr:_.cloneDeep(r),curWaferName:o,controls:"single_statistics"})},50);if("all_statistics"==$(this).attr("aria-controls")){var l=$("#all_statistics>.panel>.panel-heading>span");l.removeClass("glyphicon-menu-right").addClass("glyphicon-menu-down").parent().parent().removeClass("panel-success").addClass("panel-info"),l.parent().next().slideDown(200)}}),$(".g_info_m_in").hide(),eleResize(),$(window).on("resize",function(){eleResize()}),$(function(){if(_.isEqual(_.toUpper(eouluGlobal.S_getBrowserType()[0]),"IE")||_.isEqual(_.toUpper(eouluGlobal.S_getBrowserType()[0]),"IE11")){var a=$(".g_body").width();$(".g_bodyin_bodyin_top,.g_bodyin_bodyin_top_wrap,.g_bodyin_bodyin_bottom,.body_div,.home_dataCompare").width(a)}eouluGlobal.C_pageAuthorityCommonHandler({authorityJQDomMap:_.cloneDeep({"管理员":[$(".g_info_r  .AdminOperat")]})}),$(".breadcrumb li:eq(0) a ").attr("href","./HomeInterface"),dataCompareRenderData(1),dataCompareState.pageObj.selector="#pagelist",dataCompareState.pageObj.pageOption={limit:10,count:dataCompareState.pageObj.itemLength,curr:1,ellipsis:!0,pageShow:2,hash:!1,callback:function(a){dataCompareState.pageObj.currentPage=a.curr,a.isFirst||(dataCompareRenderData(a.curr),$("#checkAll").prop("checked",$(".home_dataCompare_top tbody tr.warning").length==$(".home_dataCompare_top tbody tr").length))}},dataCompareState.paginationObj.normal=new Pagination(dataCompareState.pageObj.selector,dataCompareState.pageObj.pageOption)}),$(".g_info_r>.glyphicon-search").click(function(){var a=$(".g_info_m").innerWidth();$(this).css("position","relative").animate({left:-(a/2+20)+"px"},500,"swing",function(){$(this).fadeOut(200,function(){$(".g_info_m_in").fadeIn(200).fadeTo(1,1),dataCompareState.stateObj.searchShow=!1})})}),$(".g_info_m_in span.input-group-addon").click(function(){$(".g_info_m_in").fadeTo(0,200,function(){$(this).fadeOut(200),$(".g_info_r>.glyphicon-search").fadeIn(100).animate({left:"0px"},600,"swing",function(){$(this).css("position","static"),dataCompareState.stateObj.searchShow=!0})})}),$(document).on("mouseover",".home_dataCompare_top td",function(){$(this).addClass("warning").parent().addClass("info")}).on("mouseout",".home_dataCompare_top td",function(){$(this).removeClass("warning").parent().removeClass("info")}).on("click",".home_dataCompare_top td",function(){var t=$(this),a=t.parent().find("input[type='checkbox']").data("ivalue").toString();$.ajax({url:"Examine",type:"GET",data:{waferId:a},dataType:"json",success:function(a){if(!a)return dataCompareSwalMixin({title:"提示",text:"无数据，不能访问",type:"warning",showConfirmButton:!1,timer:2e3}),!1;t.parent().toggleClass("warning info").find("[type='checkbox']").prop("checked",!t.parent().find("[type='checkbox']").prop("checked")).change()},error:function(a,t,e){dataCompareSwalMixin({title:"异常",text:"服务器繁忙！",type:"error",showConfirmButton:!1,timer:2e3})}})}).on("click",".home_dataCompare_top tbody [type='checkbox']",function(a){a.stopPropagation(),$(this).parent().parent().toggleClass("warning info")}).on("change",".home_dataCompare_top tbody [type='checkbox']",function(){var a=$(this).data("ivalue").toString(),t=!0;if(console.log('$(this).prop("checked")',$(this).prop("checked")),$(this).prop("checked")){if($.ajax({url:"Examine",type:"GET",data:{waferId:a},dataType:"json",async:!1,success:function(a){t=a},error:function(a,t,e){dataCompareSwalMixin({title:"异常",text:"服务器繁忙！",type:"error",showConfirmButton:!1,timer:2e3})}}),!t)return $(this).prop("checked",!1),dataCompareSwalMixin({title:"提示",text:"无数据，不能访问",type:"warning",showConfirmButton:!1,timer:2e3}),!1;dataCompareState.sellectObj.selectItem.push(a),dataCompareState.searchObj.hasSearch&&dataCompareState.sellectObj.selectSearchItem.push(a),$(".home_dataCompare_bottom tbody>tr [type='checkbox'][data-ivalue='"+Number(a)+"']").parent().parent().remove(),$(".home_dataCompare_bottom tbody").append($(this).parent().parent().clone()),$(".home_dataCompare_bottom tbody tr, .home_dataCompare_bottom tbody td").removeClass("info warning")}else _.pull(dataCompareState.sellectObj.selectItem,a),dataCompareState.searchObj.hasSearch&&_.pull(dataCompareState.sellectObj.selectSearchItem,a),$(".home_dataCompare_bottom tbody [type='checkbox'][data-ivalue='"+Number(a)+"']").parent().parent().remove();dataCompareState.sellectObj.selectItem=_.uniq(dataCompareState.sellectObj.selectItem),dataCompareState.sellectObj.selectSearchItem=_.uniq(dataCompareState.sellectObj.selectSearchItem),$("#checkAll").prop("checked",$(".home_dataCompare_top tbody tr.warning").length==$(".home_dataCompare_top tbody tr").length),dataCompareState.sellectObj.selectAll=$("#checkAll").prop("checked"),renderCommonParameter(),groupJudgeRenderNav("wafer")}),$("#checkAll").on({click:function(){var a=$(this);$(".home_dataCompare_top tbody [type='checkbox']").each(function(){$(this).prop("checked",a.prop("checked")),a.prop("checked")?$(this).parent().parent().removeClass("info").addClass("warning"):$(this).parent().parent().removeClass("warning info")}),dataCompareState.sellectObj.selectAll=a.prop("checked");var t=$(".home_dataCompare_top tbody tr");if(a.prop("checked")){for(var e=0;e<t.length;e++)if(_.indexOf(dataCompareState.sellectObj.selectItem,t.eq(e).find("input[type='checkbox']").data("ivalue").toString())<0){dataCompareState.sellectObj.selectItem.push(t.eq(e).find("input[type='checkbox']").data("ivalue").toString());var r='<tr><td class="not_search"><input type="checkbox" data-ivalue="'+t.eq(e).find("input[type='checkbox']").data("ivalue")+'"></td><td data-itext="'+t.eq(e).find(".product_category").text()+'">'+t.eq(e).find(".product_category").text()+'</td><td data-itext="'+t.eq(e).find(".device_number").text()+'">'+t.eq(e).find(".device_number").text()+'</td><td data-itext="'+t.eq(e).find(".lot_number").text()+'">'+t.eq(e).find(".lot_number").text()+'</td><td data-itext="'+t.eq(e).find(".wafer_number").text()+'">'+t.eq(e).find(".wafer_number").text()+'</td><td data-itext="'+t.eq(e).find(".die_type").text()+'">'+t.eq(e).find(".die_type").text()+'</td><td data-itext="'+t.eq(e).find(".qualified_rate").text()+'">'+t.eq(e).find(".qualified_rate").text()+'</td><td data-itext="'+t.eq(e).find(".test_end_date").text()+'">'+t.eq(e).find(".test_end_date").text()+'</td><td data-itext="'+t.eq(e).find(".test_operator").text()+'">'+t.eq(e).find(".test_operator").text()+'</td><td data-itext="'+t.eq(e).find(".description").text()+'">'+t.eq(e).find(".description").text()+'</td><td data-itext="'+t.eq(e).find(".data_format").text()+'" style="display:none;">'+t.eq(e).find(".data_format").text()+'</td><td class="data_trash"><img src="assets/img/common/del_24px.svg"  data-iicon="glyphicon-remove" alt="删除" title="删除" ></td></tr>';$(".home_dataCompare_bottom tbody>tr").length?$(".home_dataCompare_bottom tbody>tr:first").before(r):$(".home_dataCompare_bottom tbody").append(r)}}else for(e=0;e<t.length;e++)-1<_.indexOf(dataCompareState.sellectObj.selectItem,t.eq(e).find("input[type='checkbox']").data("ivalue").toString())&&(dataCompareState.sellectObj.selectItem.splice(dataCompareState.sellectObj.selectItem.indexOf(t.eq(e).find("input[type='checkbox']").data("ivalue").toString()),1),$(".home_dataCompare_bottom tbody>tr  input[data-ivalue ='"+t.eq(e).find("input[type='checkbox']").data("ivalue")+"']").parent().parent().remove());renderCommonParameter(),groupJudgeRenderNav("wafer")}}),$(document).on("click",".home_dataCompare_bottom .data_trash",function(){var t=$(this).parent().find("input[type='checkbox']").data("ivalue").toString();$(".home_dataCompare_top tr input[type='checkbox'][data-ivalue='"+t+"']").prop("checked",!1).parent().parent().removeClass("warning"),_.remove(dataCompareState.sellectObj.selectItem,function(a){return a==t}),$("#checkAll").prop("checked",!1),dataCompareState.sellectObj.selectAll=$("#checkAll").prop("checked"),renderCommonParameter(),groupJudgeRenderNav("wafer"),$(this).parent().remove()}),$(document).on("dblclick",".home_dataCompare_bottom .home_dataCompare_bottom_del_all",function(){$(".home_dataCompare_top .warning").removeClass("warning").find("input[type='checkbox']").prop("checked",!1),dataCompareState.sellectObj.selectItem=[],$("#checkAll").prop("checked",!1),dataCompareState.sellectObj.selectAll=$("#checkAll").prop("checked"),renderCommonParameter(),groupJudgeRenderNav("wafer"),$(".home_dataCompare_bottom tbody").empty()}),$(".g_info_m_in .form-control-feedback").click(function(){$(this).prev().children("input").val("")}),$("#search_input").on("input propertychange change",function(){""!=$(this).val().trim()?$(this).parent().parent().next().removeClass("btn-default").addClass("btn-primary").prop("disabled",!1):($(this).val(""),$(this).parent().parent().next().removeClass("btn-primary").addClass("btn-default").prop("disabled",!0))}).on("keyup",function(a){13==(a.keyCode||a.which||a.charCode)&&""!=$(this).val().trim()&&$(this).parent().parent().next().trigger("click")}),$("#search_button").on("click",function(){$("#checkAll").prop("checked",!1),dataCompareState.sellectObj.selectSearchItem=[];var a=$("#search_input").val().trim();return dataCompareState.searchObj.hasSearch=""!=a,dataCompareState.searchObj.searchVal=1==dataCompareState.searchObj.hasSearch?a:null,dataCompareRenderData(1),dataCompareState.searchObj.hasSearch?(dataCompareState.pageSearchObj.currentPage=1,dataCompareState.pageSearchObj.pageOption.curr=1,dataCompareState.pageSearchObj.pageOption.count=dataCompareState.pageSearchObj.itemLength,$("ol#pagelist").remove(),$("span.futureDT2_page_span").before('<ol class="pagination" id="pagelist"></ol>'),dataCompareState.paginationObj.search=new Pagination(dataCompareState.pageSearchObj.selector,dataCompareState.pageSearchObj.pageOption)):(dataCompareState.pageObj.pageOption.curr=1,dataCompareState.pageObj.pageOption.count=dataCompareState.pageObj.itemLength,$("ol#pagelist").remove(),$("span.futureDT2_page_span").before('<ol class="pagination" id="pagelist"></ol>'),dataCompareState.paginationObj.normal=new Pagination(dataCompareState.pageObj.selector,dataCompareState.pageObj.pageOption)),!1}),$("#jumpText").on("input propertychange",function(){$(this).val($(this).val().replace(/[^\d]/g,""))}),$("#jumpPage").on("click",function(){var a=Number($("#jumpText").val()),t=Number(dataCompareState.pageObj.currentPage),e=Number(dataCompareState.pageObj.pageCount);(dataCompareState.searchObj.hasSearch&&(t=Number(dataCompareState.pageSearchObj.currentPage),e=Number(dataCompareState.pageSearchObj.pageCount)),t==a||a<=0||e<a)?$("#jumpText").val(""):!1!==getdataCompareData(dataCompareState.searchObj.searchVal)?dataCompareState.searchObj.hasSearch?(dataCompareState.pageSearchObj.pageOption.curr=a,dataCompareState.paginationObj.search.goPage(a),dataCompareState.paginationObj.search.renderPages(),dataCompareState.paginationObj.search.options.curr=a,dataCompareState.paginationObj.search.options.callback&&dataCompareState.paginationObj.search.options.callback({curr:dataCompareState.paginationObj.search.pageNumber,isFirst:!1})):(dataCompareState.pageObj.pageOption.curr=a,dataCompareState.paginationObj.normal.goPage(a),dataCompareState.paginationObj.normal.renderPages(),dataCompareState.paginationObj.normal.options.curr=a,dataCompareState.paginationObj.normal.options.callback&&dataCompareState.paginationObj.normal.options.callback({curr:dataCompareState.paginationObj.normal.pageNumber,isFirst:!1})):dataCompareSwalMixin({title:"出错！",text:"页面将在2秒后刷新",type:"error",showConfirmButton:!1,timer:2e3}).then(function(a){a.dismiss!=swal.DismissReason.backdrop&&a.dismiss!=swal.DismissReason.esc&&a.dismiss!=swal.DismissReason.timer||window.location.reload()})}),$(document).on("click",".home_dataCompare_bottom .panel-body li",function(){if(!dataCompareState.stateObj.canClickParam)return!1;$(this).toggleClass("list-group-item-info").children("span").text(["选中","取消选中"][Number($(this).hasClass("list-group-item-info"))]),groupJudgeRenderNav("param")}),$(document).on("click",".home_dataCompare_bottom .right_div .allchoose",function(){if(0==$(".right_div>.panel>.panel-body ul li").length)return!1;$(this).prop("ischoose")?($(this).text("全选").prop("ischoose",!1),$(".right_div>.panel>.panel-body ul li").removeClass("list-group-item-info").children("span").text("选中")):($(this).text("取消全选").prop("ischoose",!0),$(".right_div>.panel>.panel-body ul li").addClass("list-group-item-info").children("span").text("取消选中")),groupJudgeRenderNav("param")}),$(document).on("click",".g_bodyin_bodyin_bottom div.panel-heading>span.glyphicon",function(){$(this).toggleClass("glyphicon-menu-down glyphicon-menu-right").parent().parent().toggleClass("panel-info panel-success"),$(this).hasClass("glyphicon-menu-right")?$(this).parent().next().slideUp(200):$(this).parent().next().slideDown(200)});