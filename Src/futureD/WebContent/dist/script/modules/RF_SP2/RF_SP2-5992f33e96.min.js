$(".g_bodyin_bodyin_bottom_2, .signalChart_div, .reRenderBtnDiv, .g_bodyin_bodyin_top_wrap_m_in li[data-targetclass='add']").hide(),$(".reRenderBtnDiv, button.backover, button.open_del_indicatrix, .g_bodyin_bodyin_bottom_rsubin_tit>button").css({opacity:1});var RF_SP2SwalMixin=swal.mixin({confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!0,animation:!1,customClass:"animated zoomIn"}),S_factorial=eouluGlobal.S_factorial,RF_SP2Store=Object.create(null);function markerJoinCalc(n){return _.forEach(RF_SP2Store.stateObj.splineSelectedArr,function(i,t){if(-1==n.indexOf(i.markerName))return!0;var e=n.match(new RegExp(i.markerName+"\\.X","g")),a=n.match(new RegExp(i.markerName+"\\.Y","g"));_.forEach(e,function(t,e){n=n.replace(t,i.x)}),_.forEach(a,function(t,e){n=n.replace(t,i.y)})}),n}function markerMathCalc(o){return _.forOwn(RF_SP2Store.MathMap,function(r,t){if(-1==o.indexOf(t))return!0;if(null==r.reg){var e=new RegExp(t,"g");o=_.replace(o,e,r.replace)}else{var i=o.match(r.reg);if(_.isNil(i))return!0;_.isNumber(r.index)?_.forEach(i,function(t,e){var i="("+r.replace+")",a=t.match(r.reg1)[r.index];i=i.replace("##1",a),o=o.replace(t,i)}):_.isArray(r.index)&&_.forEach(i,function(t,e){var i="("+r.replace+")",a=t.match(r.reg1)[r.index[0]],n=t.match(r.reg1)[r.index[1]];i=(i=i.replace("##1",a)).replace("##2",n),o=o.replace(t,i)})}}),o}function judgeLineSegmentIntersect(i,a,t){var n=!1;return _.isEmpty(t)?n=!1:_.forEach(t,function(t,e){if((t[0]<=i&&i<=t[1]||t[0]<=a&&a<=t[1]||i<=t[0]&&t[0]<=a||i<=t[1]&&t[1]<=a)&&(n=!0),t[0]==i&&t[1]==a&&(n=!0),n)return!1}),n}function getDataBuildBigS12S21(t){$(".signalChart_div_foot").fadeOut(10);var e,i=t.iclassify,a=t.itargetchart,n=t.contextFlag,r=t.graphStyle,o=t.callback;e=!0===n?_.cloneDeep(RF_SP2Store.stateObj.S2PBigChartSmithData[i][r]):_.cloneDeep(RF_SP2Store.stateObj.S2PSmallChartSmithData[i]);var l={xCategories:[]},s=!1;l.series=[],_.forEach(e,function(t,e){var i={};i.name=t.name,i.data=[],_.forEach(t.data,function(t,e){i.data.push(parseFloat(t[1])),s||l.xCategories.push(parseFloat(t[0]))}),i.color=t.color,l.series.push(i),s=!0}),_.isEmpty(l.series)||RF_SP2Store.util.min_maxHandler({series:_.cloneDeep(l.series)}),l.container=a,l.legend_enabled=!0,l.zoomType="x",l.resetZoomButton={position:{align:"left",x:90,y:10},relativeTo:"chart"},_.isNil(r)?l.text=i:l.text=i+" - "+r,l.showCheckbox=!0,l.callback=o,RF_SP2Store.stateObj.smithSXCategories=_.cloneDeep(l.xCategories),drawRealS12S21(l)}function getDataBuildBigS11S22(t){$(".signalChart_div_foot").fadeIn(10);var e,r=t.iclassify,i=t.itargetchart,a=t.item,o=t.contextFlag||!1,l=t.graphStyle,n=t.callback;!0===o?e=_.cloneDeep(RF_SP2Store.stateObj.S2PBigChartSmithData[r][l]):!1===o&&(e=_.cloneDeep(RF_SP2Store.stateObj.S2PSmallChartSmithData[r])),getDataBuildS11S22({wrapDOM:document.getElementById(i),title:[""],legendName:[r],data:_.reduce(e,function(t,e,i){return t.push(_.cloneDeep(e.data)),t},[]),classify:r,msgDOM:!0,lineColorArray:_.reduce(e,function(t,e,i){return t.push(e.color),t},[]),msgInitFun:function(t){buildS11ANDS22Bottom({classify:r,bottomJQDOM:$(".signalChart_div_foot .signalChart_div_foot_in_m_in ul"),callback:function(){$(".signalChart_div_foot_in_m_in ul>li").innerHeight($(".signalChart_div_foot_in_m").innerHeight()).innerWidth(.5*$(".signalChart_div_foot_in_m").innerWidth()-1),_.isNil(a)?$(".signalChart_div_foot_in_m_in ul>li:first").addClass("active").next().addClass("active"):$(".signalChart_div_foot_in_m_in ul>li[data-iparamter='"+a+"']").addClass("active").next().addClass("active")}}),$(".signalChart_div_foot_in_m_in ul>li.active").find(".Smith_Msg2").text(t)},msgFun:function(t,e,i){var a=RF_SP2Store.stateObj.S2PSmallChartSmithData[r][e].name;!0===o&&(a=RF_SP2Store.stateObj.S2PBigChartSmithData[r][l][e].name);var n=$(".signalChart_div_foot_in_m_in ul>li[data-iparamter='"+a+"']");n.siblings().removeClass("active"),n.addClass("active").next().addClass("active").find(".Smith_Msg2").text(i),n.find(".Smith_Msg2").text(t)},GHzFlag:!0,callback:function(t){window.onresize=function(){t.onresize()},_.isFunction(n)&&n(t)}})}function buildS11ANDS22Bottom(t){var e,i=t.classify,a=t.bottomJQDOM,n=t.callback,r=t.contextFlag,o=t.graphStyle,l="";e=!0===r?RF_SP2Store.stateObj.S2PBigChartSmithData[i][o]:RF_SP2Store.stateObj.S2PSmallChartSmithData[i],_.forEach(e,function(t,e){l+='<li data-iparamter="'+t.name+'"><div class="pictureline"><p style="background: '+t.color+'"></p></div><div class="smithdata"><p class="smithdata1"><span class="Smith_Paramter">'+t.name+' </span>(<span class="Smith_Msg1">'+i+'</span>): <span class="Smith_Msg2"></span></p></div></li>'}),a.empty().append(l),_.isFunction(n)&&n()}function msgInitFun(t,e,i,a){buildS11ANDS22Bottom({classify:e,bottomJQDOM:$("#picture"+i+"bottom .picturebottom_in_m_in ul"),callback:function(){$("#picture"+i+"bottom .picturebottom_in_m_in ul>li").innerHeight($("#picture"+i+"bottom .picturebottom_in_m").innerHeight()).innerWidth($("#picture"+i+"bottom .picturebottom_in_m").innerWidth()),!1===a?$("#picture"+i+"bottom .picturebottom_in_m_in ul>li:first").addClass("active"):$("#picture"+i+"bottom .picturebottom_in_m_in ul>li[data-iparamter='"+a+"']").addClass("active")}}),$("#picture"+i+"bottom .picturebottom_in_m_in ul>li.active").find(".Smith_Msg2").text(t)}function imsgFun(t,e,i,a){var n=RF_SP2Store.stateObj.S2PSmallChartSmithData[i][e].name;$("#picture"+a+"bottom .picturebottom_in_m_in ul>li[data-iparamter='"+n+"']").addClass("active").siblings().removeClass("active"),$("#picture"+a+"bottom .picturebottom_in_m_in ul>li.active").find(".Smith_Msg2").text(t)}function getTCFDataANDDrawChart(t){var b=t.isComfirmKey,e=_.cloneDeep(RF_SP2Store.mock.RF_SP2[2].curveinfos[2].smithAndCurve.S21),i=_.cloneDeep(RF_SP2Store.mock.RF_SP2[_.random(0,1,!1)].curveinfos[2].smithAndCurve.S21);_.forEach(e,function(t,e){t[2]=t[2]-_.round(_.random(4e-4,9e-4,!0),5)}),_.forEach(i,function(t,e){t[2]=t[2]+_.round(_.random(4e-4,9e-4,!0),5)});var a=[];a[0]=[],a[1]=[];var y,n=[];n[0]=[],n[1]=[],_.forEach(e,function(t,e){a[0].push(t[0]/1e6),n[0].push(t[2])}),_.forEach(i,function(t,e){a[1].push(t[0]/1e6),n[1].push(t[2])}),_.isEmpty(RF_SP2Store.stateObj.splineSelectedArr)||_.isNil(RF_SP2Store.stateObj.splineSelectedArr)||(y=RF_SP2Store.stateObj.splineSelectedArr[0].key),renderSpline({container:"markerChart",title:"marker图",data:{xData:a,yData:n},name:_.cloneDeep(RF_SP2Store.waferTCFSelected),callback:function(a){if(!b)if("y"==y){RF_SP2Store.stateObj.key_y=!1;var n=_.reduce(RF_SP2Store.stateObj.splineSelectedArr,function(t,e,i){return-1==_.indexOf(t,e.y)&&t.push(e.y),t},[]),t=a.series[0].yData,e=a.series[1].yData;if(RF_SP2Store.stateObj.splineSelectedArr.length=0,$(".buildMarker_body>div tbody").empty(),-1<_.indexOf(t,n[0]))a.series[0].options.point.events.click.call(a.series[0].points[_.indexOf(t,n[0])]);else if(-1<_.indexOf(e,n[0]))a.series[1].options.point.events.click.call(a.series[1].points[_.indexOf(e,n[0])]);else{var r,o,l,s,c,d,u,p,i,h,S;if(console.log("兩條曲綫都沒有真實點"),_.forEach(t,function(t,e,i){if(t>n[0])return r=i[e-1],o=i[e],c=a.xAxis[0].categories[e-1],d=a.xAxis[0].categories[e],u=e,!1}),_.isNil(r)||_.isNil(o))if(_.forEach(e,function(t,e,i){if(t>n[0])return l=i[e-1],s=i[e],a.xAxis[0].categories[e-1],a.xAxis[0].categories[e],p=e,!1}),_.isNil(l)||_.isNil(s))RF_SP2SwalMixin({title:"Marker打点提示",text:"以y为key，两条曲线都未找到点",type:"info",timer:2e3});else{var f=getPointXY({one:[c,r],two:[d,o],baseVal:n[0]});console.log(f),i=_.cloneDeep(a.xAxis[0].categories),h=_.cloneDeep(t),S=_.cloneDeep(e),i.splice(p,0,f.x),S.splice(p,0,f.y),h.splice(p,0,h[p-1]),a.xAxis[0].setCategories(i),a.series[0].setData(h),a.series[1].setData(S),a.series[1].options.point.events.click.call(a.series[1].points[_.indexOf(S,n[0])])}else{var g=getPointXY({one:[c,r],two:[d,o],baseVal:n[0]});i=_.cloneDeep(a.xAxis[0].categories),h=_.cloneDeep(t),S=_.cloneDeep(e),i.splice(u,0,g.x),h.splice(u,0,g.y),S.splice(u,0,S[u-1]),a.xAxis[0].setCategories(i),a.series[0].setData(h),a.series[1].setData(S),a.series[0].options.point.events.click.call(a.series[0].points[_.indexOf(h,n[0])])}}}else if("x"==y){var m=_.reduce(RF_SP2Store.stateObj.splineSelectedArr,function(t,e,i){return-1==_.indexOf(t,e.x)&&t.push(e.x),t},[]);1==m.length?(RF_SP2Store.stateObj.splineSelectedArr.length=0,$(".buildMarker_body>div tbody").empty(),a.series[0].options.point.events.click.call(a.series[0].points[_.indexOf(a.xAxis[0].categories,m[0])])):2==m.length&&(RF_SP2Store.stateObj.splineSelectedArr.length=0,$(".buildMarker_body>div tbody").empty(),a.series[0].options.point.events.click.call(a.series[0].points[_.indexOf(a.xAxis[0].categories,m[0])]),a.series[1].options.point.events.click.call(a.series[1].points[_.indexOf(a.xAxis[0].categories,m[1])]))}}})}RF_SP2Store.waferSelected=[],RF_SP2Store.waferTCFSelected={},RF_SP2Store.contextObj={classify:null,flag:null},RF_SP2Store.stateObj={renderSelectCsvSub:!1,calcTableIndex:-1,splineSelectedArr:[],splineSelectedCopyArr:[],comfirm_key:store.get("futureDT2Online__"+$("body").data("curusername")+"__ProjectAnalysis__comfirm_key")||"请选择",key_y:!1,smithSXCategories:[],S12:{indicatrix_low:[],indicatrix_up:[]},S21:{indicatrix_low:[],indicatrix_up:[]},S11:{indicatrix_low:[],indicatrix_up:[]},S22:{indicatrix_low:[],indicatrix_up:[]},indicatrix_min_max:[],indicatrix_state_arr:[],indicatrix_copy:{low:[],up:[],delFlag:!1,submitFlag:!1},S2PSmallChartSmithArr:[],S2PSmallChartSmithData:{S11:[],S12:[],S21:[],S22:[]},dblclickFlag:!1,smithSmallContainerFlag:{S11:!1,S12:!1,S21:!1,S22:!1},navCurveType:"RF-S2P",S2PBigChartSmithData:{S11:{},S12:{},S21:{},S22:{}},RFSP2Checkbox:null},RF_SP2Store.MathMap={sin:{replace:"Math.sin",reg:null,fun:null,index:-1},cos:{replace:"Math.cos",reg:null,fun:null,index:-1},tan:{replace:"Math.tan",reg:null,fun:null,index:-1},ln:{replace:"Math.log",reg:null,fun:null,index:-1},log:{replace:"Math.log(##2)/Math.log(##1)",reg:/log\(\d+\)\(\d+\)/g,reg1:/log\((\d+)\)\((\d+)\)/,fun:"match",index:[1,2]},"!":{replace:"S_factorial(##1)",reg:/\(\d+\)\!/g,reg1:/\((\d+)\)(?=\!)/,fun:"match",index:1},"π":{replace:"Math.PI",reg:null,fun:null,index:-1},e:{replace:"Math.E",reg:null,fun:null,index:-1},"^":{replace:"Math.pow(##1, ##2)",reg:/\(\d+\)\^\(\d+\)/,reg1:/\((\d+)\)\^\((\d+)\)/,fun:"match",index:[1,2]},"√":{replace:"Math.sqrt(##1)",reg:/√\(\d+\)/g,reg1:/√\((\d+)\)/,fun:"match",index:1},"°":{replace:"*Math.PI/180",reg:null,reg1:null,fun:null,index:-1}},RF_SP2Store.allowKeyCode=[8,37,38,39,40,46,48,49,50,51,52,53,54,55,56,57,58,77,96,97,98,99,100,101,102,103,104,105,106,107,109,110,111,190],RF_SP2Store.search_markerObj={awesomplete:null,list:[]},RF_SP2Store.util=Object.create(null),RF_SP2Store.util.renderWaferFile=function(t){var e=t.data||[],i=t.waferFile,a='<div class="panel panel-default slideUp"><div class="panel-heading" title="点击展开" data-waferid="'+t.waferId+'" data-waferfile="'+i+'">'+i+'<span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></div><ul class="list-group">';return e=_.sortBy(e,function(t){return t[2]}),_.forEach(e,function(t,e){a+='<li class="list-group-item" data-waferfile="'+i+'" data-curvefile="'+t[0]+'" data-curvetypeid="'+t[1]+'" data-dieid="'+t[2]+'">'+t[0]+"</li>"}),a+="</ul></div>"},RF_SP2Store.util.eleResize=function(t){var e=(t=t||{}).classify||1;if(1===e){var i=$(window).height();i<600&&(i=600),$("body").height(i),$(".g_bodyin_bodyin_bottom").innerHeight(i-180),$(".g_bodyin_bodyin_bottom_l, .g_bodyin_bodyin_bottom_r").innerHeight(i-190),$("div.picturetop").each(function(){if($(this).is("#picture2top")||$(this).is("#picture3top")){var t=1,e=0;20<RF_SP2Store.waferSelected.length&&(t=2,e=_.get(eouluGlobal.S_getPageAllConfig(),"futureDT2.scrollBarWidth",7)),$(this).innerHeight(~~($(this).parent().height()*t)-30).innerWidth(~~($(this).parent().width()-e))}else $(this).innerHeight($(this).parent().height()-30)}),$(".picturebottom_in_m ul>li").innerWidth($(".picturebottom_in_m").innerWidth())}else 2===e&&($(".g_bodyin_bodyin_bottom_lsub, .g_bodyin_bodyin_bottom_rsub").height($(".g_bodyin_bodyin_bottom").height()),$(".g_bodyin_bodyin_bottom_lsub_top, .g_bodyin_bodyin_bottom_lsub_bottom").innerHeight($(".g_bodyin_bodyin_bottom_lsub").innerHeight()/2-1))},RF_SP2Store.util.smithHandler=function(t){var n=t.s,r=t.data,o=t.seriesName,e=t.delLi||!1;if(_.isEqual(n,"S11")||_.isEqual(n,"S22")){if(!1===e)setTimeout(function(){var t,e=[],i=[],a=_.find($("#picture2top").highcharts().series,function(t){return t.name==o}).color;RF_SP2Store.stateObj.S2PSmallChartSmithData[n].push({name:o,data:_.cloneDeep(r),color:a}),_.forEach(RF_SP2Store.stateObj.S2PSmallChartSmithData[n],function(t){i.push(_.cloneDeep(t.data)),e.push(t.color)}),t=_.isEqual(n,"S11")?"1":"4",getDataBuildS11S22({wrapDOM:document.getElementById("picture"+t+"top"),title:[""],legendName:[n],data:i,classify:n,msgDOM:document.getElementById("picture"+t+"bottom"),lineColorArray:e,msgInitFun:_.bind(msgInitFun,this,_,n,t,o),msgFun:_.bind(imsgFun,this,_,_,n,t),GHzFlag:!0,callback:function(t){2<=RF_SP2Store.stateObj.S2PSmallChartSmithArr.length&&(RF_SP2Store.stateObj.S2PSmallChartSmithArr.length=0),RF_SP2Store.stateObj.S2PSmallChartSmithArr.push(t)}})},10);else if(!0===e){_.pullAt(RF_SP2Store.stateObj.S2PSmallChartSmithData[n],_.findIndex(RF_SP2Store.stateObj.S2PSmallChartSmithData[n],function(t){return t.name==o}));var i,a=[],l=[];i=_.isEqual(n,"S11")?"1":"4",_.forEach(RF_SP2Store.stateObj.S2PSmallChartSmithData[n],function(t){l.push(_.cloneDeep(t.data)),a.push(t.color)}),getDataBuildS11S22({wrapDOM:document.getElementById("picture"+i+"top"),title:[""],legendName:[n],data:l,classify:n,msgDOM:document.getElementById("picture"+i+"bottom"),lineColorArray:a,msgInitFun:_.bind(msgInitFun,this,_,n,i,!1),msgFun:_.bind(imsgFun,this,_,_,n,i),GHzFlag:!0,callback:function(t){2<=RF_SP2Store.stateObj.S2PSmallChartSmithArr.length&&(RF_SP2Store.stateObj.S2PSmallChartSmithArr.length=0),RF_SP2Store.stateObj.S2PSmallChartSmithArr.push(t)}})}}else if(_.isEqual(n,"S12")||_.isEqual(n,"S21")){var s;if(s=_.isEqual(n,"S12")?"2":"3",!1===e){var c="("+r[0][1].toFixed(2)+" dB,"+r[0][0].toFixed(2)+" GHz)";if(!1===RF_SP2Store.stateObj.smithSmallContainerFlag[n])getDataBuildS12S21({allData:[{name:o,data:r}],renderData:!0,container:"picture"+s+"top",zoomType:"None",showCheckbox:!1,title:{text:n,floating:!0,align:"right",x:-10,y:10},legend_enabled:!1,GHzFlag:!0,callback:function(){RF_SP2Store.stateObj.smithSmallContainerFlag[n]=!0,setTimeout(function(){msgInitFun(c,n,s,!1)},10)},pointMouseOverCallback:function(t,e,i){var a=e.xAxis[0].categories,n="("+t.y+" dB,"+a[t.x]+" GHz)";$("#picture"+s+"bottom .picturebottom_in_m_in ul>li[data-iparamter='"+t.series.name+"']").addClass("active").siblings().removeClass("active"),$("#picture"+s+"bottom .picturebottom_in_m_in ul>li.active").find(".Smith_Msg2").text(n)}});else{var d=[];_.forEach(r,function(t,e){d.push(parseFloat(t[1]))}),$("#picture"+s+"top").highcharts().addSeries({name:o,data:d,showInLegend:!0,enableMouseTracking:!0,events:{mouseOver:function(){}}}),setTimeout(function(){msgInitFun(c,n,s,o)},10)}var u=_.find($("#picture"+s+"top").highcharts().series,function(t){return t.name==o}).color;RF_SP2Store.stateObj.S2PSmallChartSmithData[n].push({name:o,data:_.cloneDeep(r),color:u})}else if(!0===e){var p=_.find($("#picture"+s+"top").highcharts().series,function(t){return t.name==o});!_.isNil(p)&&p.remove(),_.pullAt(RF_SP2Store.stateObj.S2PSmallChartSmithData[n],_.findIndex(RF_SP2Store.stateObj.S2PSmallChartSmithData[n],function(t){return t.name==o}))}}},RF_SP2Store.util.linkage=function(t){var e=t.classify||1,i=t.jQDOM,a=t.TCFflag||!1;0<i.children(".list-group-item-info").length?i.parent().removeClass("panel-default").addClass("panel-success"):i.parent().removeClass("panel-success").addClass("panel-default"),!0===a||!1===a&&1===e&&$(".g_bodyin_bodyin_bottom_l_inbottom>input").prop("checked",$(".g_bodyin_bodyin_bottom_l_intop li.list-group-item").length===$(".g_bodyin_bodyin_bottom_l_intop li.list-group-item.list-group-item-info").length)},RF_SP2Store.util.renderNav=function(t){var e="",i="RF-S2P"==t.item?"S2P":t.item,a=t.type,n=t.index;if("g_bodyin_bodyin_bottom_1"==a)e+='<li class="active" data-targetclass="g_bodyin_bodyin_bottom_1">'+i+'</li><li data-targetclass="g_bodyin_bodyin_bottom_2">TCF</li>';else if("g_bodyin_bodyin_bottom_2"==a){e+='<li data-targetclass="g_bodyin_bodyin_bottom_1">返回'+i+"</li>";var r="";(1==n||_.isNil(n))&&(r="active"),e+='<li class="'+r+'" data-targetclass="g_bodyin_bodyin_bottom_2">TCF</li>',e+='<li data-targetclass="add"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></li>'}$(".g_bodyin_bodyin_top_wrap_m_in>ul").empty().append(e)},RF_SP2Store.util.graphStyleHandler=function(t){var e=t.graphStyle,i=t.iclassify,a=t.itargetchart,n=(t.contextFlag,t.callback);if("XYOfPhase"==e||"XYOfMagnitude"==e){$(".signalChart_div_foot").fadeOut(10);var r,o=RF_SP2Store.stateObj.S2PBigChartSmithData[i][e],l=_.map(o,function(t,e){var i={};return i.name=t.name,i.color=t.color,i.data=_.zip.apply(void 0,t.data)[1],i});r=_.isNil(l[0])?[]:(RF_SP2Store.util.min_maxHandler({series:_.cloneDeep(o)}),_.zip.apply(void 0,o[0].data)[0]),RF_SP2Store.util.graphStyleDraw({graphStyle:e,sParameter:i,container:a,series:l,xCategories:r,callback:n})}else if("Polar"==e){$(".signalChart_div_foot").fadeIn(10);var s=[],c=RF_SP2Store.stateObj.S2PBigChartSmithData[i][e];_.forEach(c,function(t,e){var n={};n.name=t.name,n.color=t.color,n.data=[],_.forEach(t.data,function(t,e){var i,a;a=(i=t[2]<0?t[2]+360:t[2])<=90?i-90+360:i-90,n.data.push([a,t[1]])}),s.push(n)}),RF_SP2Store.util.graphStyleDraw({graphStyle:e,sParameter:i,container:a,data:_.cloneDeep(c),series:s,callback:n})}},RF_SP2Store.util.graphStyleDraw=function(e){var i,t=e.container,a=e.graphStyle,n=e.sParameter,r=e.xCategories,o=e.series,l=e.callback;if("XYOfPhase"==a||"XYOfMagnitude"==a)i=Highcharts.chart(t,{chart:{type:"line",zoomType:"x",resetZoomButton:{position:{align:"left",x:0,y:0},relativeTo:"chart"}},title:{text:n+" - "+a},lang:{loading:"Loading..."},legend:{enabled:!0},xAxis:{title:{text:"GHz"},categories:r},yAxis:{title:{text:_.isEqual(a,"XYOfPhase")?"Degrees":"Magnitude"},gridLineColor:"#eee",gridLineWidth:1},series:o,credits:{enabled:!1},tooltip:{formatter:function(t){return"<b>"+this.series.name+"</b><br>"+this.x+" GHz, "+this.y+" "+(_.isEqual(a,"XYOfPhase")?"Degrees":"Magnitude")},useHTML:!0},plotOptions:{series:{point:{events:{mouseOver:function(t){_.isFunction(e.pointMouseOverCallback)&&e.pointMouseOverCallback(this,i,t)}}},showCheckbox:!0}}}),RF_SP2Store.stateObj.smithSXCategories=_.cloneDeep(r);else if("Polar"==a){var s=e.data;i=Highcharts.chart(t,{chart:{polar:!0,type:"scatter",backgroundColor:"#fff"},credits:{enabled:!1},title:{text:n+" - "+a},pane:{startAngle:0,endAngle:360},tooltip:{backgroundColor:null,borderWidth:0,shadow:!1,useHTML:!0,style:{padding:0},formatter:function(){var t;return t=270<=this.x?this.x+90-360:this.x+90,t=_.round(t,2),'<span style="color:'+this.point.color+'">●</span> '+this.series.name+": <br/>角度：<b>"+t+"°</b><br/>半径：<b>"+this.y+"</b><br/>"}},xAxis:{tickInterval:45,minTickInterval:45,min:0,max:360,labels:{formatter:function(){return(270<=this.value?this.value+90-360:this.value+90)+"°"}},tickmarkPlacement:"on",gridLineColor:"#ccc",gridLineWidth:1,gridZIndex:1,lineColor:null,lineWidth:0,reversed:!0},yAxis:{min:0,lineWidth:0,gridLineColor:"#ccc",gridLineWidth:1,gridLineInterpolation:"circle",gridZIndex:1},plotOptions:{series:{pointStart:0,pointInterval:45,lineWidth:0,point:{events:{mouseOver:function(t){var i,e,a,n=this,r=_.find(s,function(t,e){return i=e,t.name==n.series.name}).data[this.index],o="("+r[3].toFixed(2)+","+r[4].toFixed(2)+"),"+r[0].toFixed(2)+"GHz";a=1==s.length?"( , ), GHz":(i==s.length-1&&(i=-1),"("+(e=_.cloneDeep(s[i+1].data[0]))[3].toFixed(2)+","+e[4].toFixed(2)+"),"+e[0].toFixed(2)+"GHz"),curDOM=$(".signalChart_div_foot_in_m_in ul>li[data-iparamter='"+n.series.name+"']"),curDOM.siblings().removeClass("active"),curDOM.addClass("active").next().addClass("active").find(".Smith_Msg2").text(a),curDOM.find(".Smith_Msg2").text(o)}}}}},series:o})}return _.isFunction(l)&&l(i),i},RF_SP2Store.util.graphStyleDispatch=function(t){var n=t.graphStyle,i=(t.callback,[]),a=[];$(".g_bodyin_bodyin_bottom_l_intop .panel>ul>li.list-group-item-info").each(function(t,e){i.push($(e).data("curvetypeid")),a.push($(e).data("waferfile")+"  "+$(e).data("curvefile"))});var e=$("[id$=_chart_S]:visible").attr("id"),r=e.replace("_chart_S","");if(_.isEmpty(i)){var o;switch(RF_SP2Store.stateObj.S2PBigChartSmithData[r][n]=[],$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!0),n){case"Smith":o=getDataBuildBigS11S22;break;case"Polar":case"XYOfPhase":case"XYOfMagnitude":o=RF_SP2Store.util.graphStyleHandler;break;case"XYdBOfMagnitude":o=getDataBuildBigS12S21}o.call(void 0,{iclassify:r,itargetchart:e,contextFlag:!0,graphStyle:n}),$(".signalChart_div_foot").fadeOut(10)}else RF_SP2SwalMixin({title:"信息",text:"正在绘图，请勿点击",type:"info",showConfirmButton:!1,showCancelButton:!1}),RF_SP2Store.ajax.AnalysisCurve({curveTypeId:i,legend:a,graphStyle:n,sParameter:r,async:!1,done:function(t){if(_.isNil(t)||_.isEmpty(t))eouluGlobal.S_getSwalMixin()({title:"信息",text:"所选晶圆无曲线数据！",html:void 0,type:"info",showConfirmButton:!1,timer:1900}).then(function(){});else{switch(RF_SP2Store.stateObj.S2PBigChartSmithData[r][n]=[],_.forOwn(t,function(t,a){_.forOwn(t,function(t,e){var i={};i.name=a,i.data=_.cloneDeep(t),i.color=_.find($("#picture2top").highcharts().series,function(t){return t.name==a}).color,RF_SP2Store.stateObj.S2PBigChartSmithData[r][n].push(i)})}),n){case"Smith":getDataBuildBigS11S22({iclassify:r,itargetchart:e,contextFlag:!0,graphStyle:n,callback:function(t){$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!0)}});break;case"Polar":RF_SP2Store.util.graphStyleHandler({iclassify:r,itargetchart:e,contextFlag:!0,graphStyle:n,callback:function(t){$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!0),buildS11ANDS22Bottom({classify:r,bottomJQDOM:$(".signalChart_div_foot .signalChart_div_foot_in_m_in ul"),callback:function(){$(".signalChart_div_foot_in_m_in ul>li").innerHeight($(".signalChart_div_foot_in_m").innerHeight()).innerWidth(.5*$(".signalChart_div_foot_in_m").innerWidth()-1),$(".signalChart_div_foot_in_m_in ul>li:first").addClass("active").next().addClass("active")},contextFlag:!0,graphStyle:n});var e=_.cloneDeep(RF_SP2Store.stateObj.S2PBigChartSmithData[r][n][0].data),i="("+e[0][3].toFixed(2)+","+e[0][4].toFixed(2)+"),"+e[0][0].toFixed(2)+"GHz";$(".signalChart_div_foot_in_m_in ul>li.active").find(".Smith_Msg2").text(i)}});break;case"XYOfPhase":RF_SP2Store.util.graphStyleHandler({iclassify:r,itargetchart:e,contextFlag:!0,graphStyle:n,callback:function(t){setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50),$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!1)}});break;case"XYOfMagnitude":RF_SP2Store.util.graphStyleHandler({iclassify:r,itargetchart:e,contextFlag:!0,graphStyle:n,callback:function(t){setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50),$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!1)}});break;case"XYdBOfMagnitude":getDataBuildBigS12S21({iclassify:r,itargetchart:e,contextFlag:!0,graphStyle:n,callback:function(){setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50),$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!1)}})}swal.close()}}})},RF_SP2Store.util.min_maxHandler=function(t){var e=t.series,i=[],a=!1;_.isArray(e[0].data[0])&&(a=!0),_.times(e.length,function(t){i[1]=a?(i[0]=_.min([i[0],_.min(_.zip.apply(void 0,e[t].data)[1])]),_.max([i[1],_.max(_.zip.apply(void 0,e[t].data)[1])])):(i[0]=_.min([i[0],_.min(e[t].data)]),_.max([i[1],_.max(e[t].data)]))}),RF_SP2Store.stateObj.indicatrix_min_max[0]=i[0],RF_SP2Store.stateObj.indicatrix_min_max[1]=i[1]},RF_SP2Store.util.MarkerCurveHandler=function(t){var e=t.data,i=t.container,a=t.title||"marker图",n=t.findData,r=[],o=[],l=[];_.forOwn(e,function(t,i){var e=_.find(n.selected,function(t,e){return _.isEqual(t.curvetypeid,_.toString(i))}).curvefile;l.push(n.waferfile.replace(/\..*$/,"")+"  "+e);var a=_.zip.apply(void 0,t.curveData);r.push(a[0]),o.push(a[1])}),console.log(r),console.log(o),console.log(l),renderSpline({container:i,title:a,data:{xData:r,yData:o},name:l,callback:null})},RF_SP2Store.ajax=Object.create(null),RF_SP2Store.ajax.AnalysisFile=function(t){$.ajax({type:"GET",url:"AnalysisFile",data:{wafer:t.wafer},dataType:"json"}).then(t.done)},RF_SP2Store.ajax.AnalysisCurve=function(t){var e=t.iasync;_.isNil(e)&&(e=!0),$.ajax({type:"GET",url:"AnalysisCurve",async:e,data:{curveTypeId:t.curveTypeId,legend:t.legend||void 0,graphStyle:t.graphStyle||void 0,sParameter:t.sParameter||void 0},dataType:"json"}).then(t.done)},RF_SP2Store.ajax.MarkerCurve=function(t){var e=t.curveTypeId,i=t.waferId,a=t.sParameter||"S11";$.ajax({type:"GET",url:"MarkerCurve",data:{curveTypeId:e,waferId:i,sParameter:a},dataType:"json"}).then(t.done)},$(function(){var t=$("body").data("wafer");_.isNil(t)||_.isEmpty(t)?eouluGlobal.S_getSwalMixin()({showConfirmButton:!1,title:"参数验证",text:"传参出错！请至工程分析页面重新选取",timer:1900,type:"error"}).then(function(){eouluGlobal.S_settingURLParam({},!1,!1,!1,"ProjectAnalysis")}):RF_SP2Store.ajax.AnalysisFile({wafer:t,done:function(t){if(!_.isNil(t)&&!_.isEmpty(t)){var i="",a=0;_.forOwn(t,function(t,e){a+=t.curveFile.length,i+=RF_SP2Store.util.renderWaferFile({data:t.curveFile,waferFile:t.waferFile,waferId:e})});var e=eouluGlobal.S_getPageAllConfig().colorArray;Highcharts.setOptions({chart:{colorCount:a},colors:_.sampleSize(e,a)}),$(".g_bodyin_bodyin_bottom_l_intop").empty().append(i).children("div.panel:eq(0)").children("div.panel-heading").trigger("click").siblings("ul").children("li:eq(0)").trigger("click"),$(".g_bodyin_bodyin_bottom_lsub_top").empty().append(i).children("div.panel:eq(0)").children("div.panel-heading").trigger("click")}RF_SP2Store.util.eleResize(),$(window).on("resize",function(){RF_SP2Store.util.eleResize(),RF_SP2Store.util.eleResize({classify:2})})}}),RF_SP2Store.util.renderNav({item:RF_SP2Store.stateObj.navCurveType,type:"g_bodyin_bodyin_bottom_1"}),$(".g_bodyin_bodyin_top_wrap_m_in").innerWidth()>$(".g_bodyin_bodyin_top_wrap_m").innerWidth()&&$(".g_bodyin_bodyin_top_wrap_l>span, .g_bodyin_bodyin_top_wrap_r>span").show(),$("#comfirm_key_sel").val(RF_SP2Store.stateObj.comfirm_key),RF_SP2Store.stateObj.key_y="y"==RF_SP2Store.stateObj.comfirm_key,$(".indicatrix_div, .allLegends").draggable({distance:5});var e=store.get("futureDT2Online__RF_SP2__saveMarkerFlag");"hasSave"==e&&($(".g_bodyin_bodyin_top_wrap_m_in li[data-targetclass='g_bodyin_bodyin_bottom_2']").trigger("click"),store.remove("futureDT2Online__RF_SP2__saveMarkerFlag")),RF_SP2Store.search_markerObj.awesomplete=new Awesomplete(document.getElementById("clac_textarea"),{list:RF_SP2Store.search_markerObj.list,minChars:1,maxItems:10,autoFirst:!0,filter:function(t,e){var i=eouluGlobal.S_getCaretPosition($("#clac_textarea")[0]);return"M"==e.substring(i-1,i)},replace:function(t){var e=eouluGlobal.S_getCaretPosition($("#clac_textarea")[0]),i=this.input.value.substring(0,e-1)+t.value+this.input.value.substring(e,this.input.value.length);$("#clac_textarea").val(i),eouluGlobal.S_setCaretPosition($("#clac_textarea")[0],e+t.value.length-1)}});var i=new Awesomplete("#calc_text",{minChars:0,list:["TCF_L","TCF_R","TCF"]}),a,n;return $(".subAddParam_body button.awesomplete_btn").click(function(){0===i.ul.childNodes.length?(i.minChars=0,i.evaluate()):i.ul.hasAttribute("hidden")?i.open():i.close()}),!1}),$(document).on("click",".g_bodyin_bodyin_bottom_l_intop .panel>.panel-heading, .g_bodyin_bodyin_bottom_lsub_top .panel>.panel-heading",function(){$(this).children("span").toggleClass("glyphicon-menu-right glyphicon-menu-down"),($(this).parent().hasClass("slideUp")?jQuery().slideDown:jQuery().slideUp).call($(this).siblings("ul"),800),$(this).parent().toggleClass("slideUp")}).on("click",".g_bodyin_bodyin_bottom_l_intop .panel>ul>li",function(){var c=$(this),d=_.toString(c.data("curvetypeid")),u=c.data("waferfile")+"  "+c.data("curvefile"),p=c.parent();if(c.hasClass("list-group-item-info")){if(_.pull(RF_SP2Store.waferSelected,d),c.removeClass("list-group-item-info"),RF_SP2Store.util.linkage({classify:1,jQDOM:p}),_.forEach(["S11","S12","S21","S22"],function(t,e){RF_SP2Store.util.smithHandler({s:t,seriesName:u,delLi:!0})}),RF_SP2Store.waferSelected.length<21){var t=~~$("#picture_box2").innerHeight(),e=~~$("#picture_box2").innerWidth();$("#picture2top, #picture3top").innerHeight(t).innerWidth(e),$("#picture2top").highcharts().setSize(e,t),$("#picture3top").highcharts().setSize(e,t)}if(RF_SP2Store.stateObj.dblclickFlag){var i=$("[id$=_chart_S]:visible"),a=i.data("iclassify"),n=i.attr("id"),r=i.data("iflag");null===RF_SP2Store.stateObj.RFSP2Checkbox?"initial"==r?-1<_.indexOf(["S11","S22"],a)?getDataBuildBigS11S22({iclassify:a,itargetchart:n}):getDataBuildBigS12S21({iclassify:a,itargetchart:n,callback:function(){setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50)}}):RF_SP2Store.util.graphStyleDispatch({graphStyle:r}):!1===RF_SP2Store.stateObj.RFSP2Checkbox&&0==$(".g_bodyin_bodyin_bottom_l_intop .panel>ul>li.list-group-item-info").length&&("initial"==r?-1<_.indexOf(["S11","S22"],a)?getDataBuildBigS11S22({iclassify:a,itargetchart:n}):getDataBuildBigS12S21({iclassify:a,itargetchart:n}):RF_SP2Store.util.graphStyleDispatch({graphStyle:r}))}}else RF_SP2Store.ajax.AnalysisCurve({curveTypeId:[d],async:!1,done:function(t){if(_.isNil(t)||_.isEmpty(t))eouluGlobal.S_getSwalMixin()({title:"信息",text:"此晶圆无曲线数据！",html:void 0,type:"info",showConfirmButton:!1,timer:1900}).then(function(){});else{if(1==_.keys(t).length&&_.forOwn(t,function(t,e){_.forOwn(t,function(t,e){RF_SP2Store.util.smithHandler({s:e,data:t,seriesName:u})})}),RF_SP2Store.waferSelected.push(d),c.addClass("list-group-item-info"),RF_SP2Store.util.linkage({classify:1,jQDOM:p}),20<RF_SP2Store.waferSelected.length){var e=~~$("#picture_box2").innerHeight(),i=~~$("#picture_box2").innerWidth(),a=2,n=_.get(eouluGlobal.S_getPageAllConfig(),"futureDT2.scrollBarWidth",7);40<RF_SP2Store.waferSelected.length&&(a=3),$("#picture2top, #picture3top").innerHeight(e*a).innerWidth(i-n),$("#picture2top").highcharts().setSize(i-n,e*a),$("#picture3top").highcharts().setSize(i-n,e*a)}if(RF_SP2Store.stateObj.dblclickFlag){var r=$("[id$=_chart_S]:visible"),o=r.data("iclassify"),l=r.attr("id"),s=r.data("iflag");"initial"==s?-1<_.indexOf(["S11","S22"],o)?setTimeout(function(){getDataBuildBigS11S22({iclassify:o,itargetchart:l})},30):getDataBuildBigS12S21({iclassify:o,itargetchart:l,callback:function(){setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50)}}):RF_SP2Store.util.graphStyleDispatch({graphStyle:s})}}}})}).on("click",".g_bodyin_bodyin_bottom_lsub_top .panel>ul>li",function(t){t=t||window.event;var e=$(this),i=e.parent(),a=_.toString(i.prev().data("waferid")),n=e.data("waferfile"),r=e.data("curvefile"),o=_.toString(e.data("curvetypeid"));if(e.hasClass("list-group-item-info"))e.removeClass("list-group-item-info"),_.pullAt(RF_SP2Store.waferTCFSelected[a].selected,_.findIndex(RF_SP2Store.waferTCFSelected[a].selected,function(t,e){return _.isEqual(t.curvetypeid,o)}));else{if(e.addClass("list-group-item-info"),_.isNil(RF_SP2Store.waferTCFSelected[a])&&(RF_SP2Store.waferTCFSelected[a]={}),RF_SP2Store.waferTCFSelected[a].waferfile=n,RF_SP2Store.waferTCFSelected[a].waferid=a,_.isNil(RF_SP2Store.waferTCFSelected[a].selected)&&(RF_SP2Store.waferTCFSelected[a].selected=[]),2<=RF_SP2Store.waferTCFSelected[a].selected.length){var l=RF_SP2Store.waferTCFSelected[a].selected.shift();$('.g_bodyin_bodyin_bottom_lsub_top .panel>ul>li[data-curvetypeid="'+l.curvetypeid+'"]').removeClass("list-group-item-info")}RF_SP2Store.waferTCFSelected[a].selected.push({curvefile:r,curvetypeid:o}),_.forEach(RF_SP2Store.waferTCFSelected,function(t,e,i){if(_.isEqual(_.toString(e),a))return!0;_.isNil(t.selected)&&(i[e].selected=[]),_.forEach(i[e].selected,function(t,e){$('.g_bodyin_bodyin_bottom_lsub_top .panel>ul>li[data-curvetypeid="'+t.curvetypeid+'"]').removeClass("list-group-item-info")}),i[e].selected=[]})}$(".g_bodyin_bodyin_bottom_lsub_top>.panel>ul").each(function(t,e){RF_SP2Store.util.linkage({jQDOM:$(e),TCFflag:!0})});var s=_.find(RF_SP2Store.waferTCFSelected,function(t){return 2==(t.selected||[]).length});_.isNil(s)?$(".reRenderBtnDiv").css({left:t.pageX+30+"px",top:t.pageY-50+"px"}).slideUp(200):$(".reRenderBtnDiv").css({left:t.pageX+30+"px",top:t.pageY-50+"px"}).slideDown(200)}),$(window).on("resize",function(){_.forEach(RF_SP2Store.stateObj.S2PSmallChartSmithArr,function(t,e,i){i[e].onresize()})}),$(".g_bodyin_bodyin_bottom_l_inbottom>input").click(function(){var t;if($(this).prop("checked")){t="glyphicon-menu-right";var c=[],i=[];if($(".g_bodyin_bodyin_bottom_l_intop .panel>ul>li:not(.list-group-item-info)").each(function(t,e){c.push($(e).data("curvetypeid")),i.push($(e).data("waferfile")+"  "+$(e).data("curvefile"))}),_.isNil(c))return!1;RF_SP2SwalMixin({title:"信息",text:"正在绘图，请勿点击",type:"info",showConfirmButton:!1,showCancelButton:!1}),RF_SP2Store.ajax.AnalysisCurve({curveTypeId:c,legend:i,async:!1,done:function(t){if(_.isNil(t)||_.isEmpty(t))eouluGlobal.S_getSwalMixin()({title:"信息",text:"所选晶圆无曲线数据！",html:void 0,type:"info",showConfirmButton:!1,timer:1900}).then(function(){});else{if(_.forOwn(t,function(t,i){_.forOwn(t,function(t,e){RF_SP2Store.util.smithHandler({s:e,data:t,seriesName:i})});var e=i.split("  ");$('.g_bodyin_bodyin_bottom_l_intop .panel>ul>li:not(.list-group-item-info)[data-waferfile="'+e[0]+'"][data-curvefile="'+e[1]+'"]').addClass("list-group-item-info")}),Array.prototype.push.apply(RF_SP2Store.waferSelected,_.cloneDeep(c)),$(".g_bodyin_bodyin_bottom_l_intop .panel>.panel-heading").each(function(){var t=$(this).siblings("ul");RF_SP2Store.util.linkage({classify:2,jQDOM:t})}),20<RF_SP2Store.waferSelected.length){var e=~~$("#picture_box2").innerHeight(),i=~~$("#picture_box2").innerWidth(),a=2,n=_.get(eouluGlobal.S_getPageAllConfig(),"futureDT2.scrollBarWidth",7);40<RF_SP2Store.waferSelected.length&&(a=3),$("#picture2top, #picture3top").innerHeight(e*a).innerWidth(i-n),$("#picture2top").highcharts().setSize(i-n,e*a),$("#picture3top").highcharts().setSize(i-n,e*a)}if(RF_SP2Store.stateObj.dblclickFlag){var r=$("[id$=_chart_S]:visible"),o=r.attr("id"),l=r.data("iclassify"),s=r.data("iflag");"initial"==s?-1<_.indexOf(["S11","S22"],l)?setTimeout(function(){getDataBuildBigS11S22({iclassify:l,itargetchart:o})},40):getDataBuildBigS12S21({iclassify:l,itargetchart:o,callback:function(){setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50)}}):RF_SP2Store.util.graphStyleDispatch({graphStyle:s})}swal.close()}}})}else t="glyphicon-menu-down",checkedF=!1,RF_SP2SwalMixin({title:"信息",text:"正在绘图，请勿点击",type:"info",showConfirmButton:!1,showCancelButton:!1}),RF_SP2Store.stateObj.RFSP2Checkbox=!1,setTimeout(function(){$(".g_bodyin_bodyin_bottom_l_intop .panel>ul>li.list-group-item-info").each(function(t,e){$(this).trigger("click")}),swal.close(),RF_SP2Store.stateObj.RFSP2Checkbox=null},30);$(".g_bodyin_bodyin_bottom_l_intop .panel>.panel-heading").each(function(){$(this).children("span").hasClass(t)&&$(this).trigger("click")})}),$(".g_bodyin_bodyin_top_wrap_l>span").click(function(){var t=parseFloat($(".g_bodyin_bodyin_top_wrap_m_in").css("left")),e=($(".g_bodyin_bodyin_top_wrap_m_in").innerWidth(),$(".g_bodyin_bodyin_top_wrap_m").innerWidth(),t+60);0<=t&&(e=0),$(".g_bodyin_bodyin_top_wrap_m_in").animate({left:e+"px"},{speed:"slow",easing:"swing",queue:!1})}),$(".g_bodyin_bodyin_top_wrap_r>span").click(function(){var t=parseFloat($(".g_bodyin_bodyin_top_wrap_m_in").css("left")),e=$(".g_bodyin_bodyin_top_wrap_m_in").innerWidth()-$(".g_bodyin_bodyin_top_wrap_m").innerWidth(),i=t-60;Math.abs(t)>=e&&(i=-e),$(".g_bodyin_bodyin_top_wrap_m_in").animate({left:i+"px"},{speed:"slow",easing:"swing",queue:!1})}),$(document).on("click",".g_bodyin_bodyin_top_wrap_m_in li",function(){var i=$(this).data("targetclass");if("add"==i)RF_SP2SwalMixin({title:"敬请期待",text:"功能尚未开发",type:"info",showConfirmButton:!1,timer:2e3});else{$(this).addClass("active").siblings().removeClass("active");var a=$(this).index();$("."+i).siblings().fadeOut(300,function(){if($(this).siblings().fadeIn(300),RF_SP2Store.util.renderNav({item:RF_SP2Store.stateObj.navCurveType,type:i,index:a}),"g_bodyin_bodyin_bottom_2"==i){if($(".g_info [data-iicon='glyphicon-question-sign']").hide(),!RF_SP2Store.stateObj.renderSelectCsvSub){RF_SP2Store.util.eleResize({classify:2});var t=$(".g_bodyin_bodyin_bottom_lsub_top>.panel:eq(0)>ul>li");t.eq(0).trigger("click"),t.eq(1).trigger("click"),$(".reRenderBtnDiv").trigger("click");var e=_.find(RF_SP2Store.waferTCFSelected,function(t){return 2==(t.selected||[]).length});_.isNil(e)?eouluGlobal.S_getSwalMixin()({title:"请求参数数据",text:"异常！未选中曲线",type:"warning",showConfirmButton:!1,showCancelButton:!1,timer:1900}):$.ajax({type:"GET",url:"CalculationData",data:{waferId:e.waferid},dataType:"json"}).then(function(t){(_.isNil(t)||_.isEmpty(t))&&$(".g_bodyin_bodyin_bottom_lsub_bottom tbody").empty().append('<tr class="canCalc"><td></td><td></td><td></td></tr>')}),RF_SP2Store.stateObj.renderSelectCsvSub=!0}$(".reRenderBtnDiv").slideDown(200)}else $(".reRenderBtnDiv").hide(),$(".g_info [data-iicon='glyphicon-question-sign']").show()})}}),$(".reRenderBtnDiv").click(function(){var e=_.find(RF_SP2Store.waferTCFSelected,function(t){return 2==(t.selected||[]).length});if(!_.isNil(e)){var i=[],t=e.waferid;_.forEach(e.selected,function(t,e){i.push(t.curvetypeid)}),RF_SP2Store.ajax.MarkerCurve({curveTypeId:i,waferId:t,sParameter:"S11",done:function(t){_.isNil(t)||RF_SP2Store.util.MarkerCurveHandler({data:t,container:"markerChart",findData:e})}})}}),$(".g_bodyin_tit_r>.glyphicon-stats").click(function(){store.set("RF_SP2_renderCSV",RF_SP2Store.mock.RF_SP2_render)}),$(document).on("click","tr.canCalc",function(){$(".RF_SP2_cover, .subAddParam").slideDown(200),$("#calc_text").val($(this).children("td:eq(0)").text()),$("#clac_textarea").val($(this).children("td:eq(2)").text()),RF_SP2Store.stateObj.calcTableIndex=$(this).index()}).on("click",".subAddParam_tit>span, .subAddParam_footin>.btn-warning",function(){$(".RF_SP2_cover, .subAddParam").slideUp(200)}).on("click",".subAddParam_footin>.btn-primary",function(){if(_.isEmpty($("#calc_text").val().trim()))return RF_SP2SwalMixin({title:"公式提示",text:"参数必填",type:"error",timer:2e3}),!1;var str=$("#clac_textarea").val();if(""==str||""==str.trim())return!1;str=markerJoinCalc(str),str=markerMathCalc(str);try{var iVal=eval(str),tr=$(".g_bodyin_bodyin_bottom_lsub_bottom tbody>tr").eq(RF_SP2Store.stateObj.calcTableIndex);_.isNaN(iVal)?tr.children().eq(1).text("9E+37"):tr.children().eq(1).text(iVal.toFixed(2)),tr.children().eq(0).text($("#calc_text").val()),tr.children().eq(2).text($("#clac_textarea").val());var noEmptyLen=0;$(".g_bodyin_bodyin_bottom_lsub_bottom tbody>tr").each(function(){var t=!1;$(this).children("td").each(function(){if(""!=$(this).text())return!(t=!0)}),t&&noEmptyLen++}),store.set("futureD__RF_SP2__paramCalc_tableStr",$(".g_bodyin_bodyin_bottom_lsub_bottom tbody").html()),noEmptyLen==$(".g_bodyin_bodyin_bottom_lsub_bottom tbody>tr").length&&$(".g_bodyin_bodyin_bottom_lsub_bottom tbody").append('<tr class="canCalc"><td></td><td></td><td></td></tr>'),$(".subAddParam_footin>.btn-warning").trigger("click")}catch(t){RF_SP2SwalMixin({title:"公式提示",text:"公式有误",type:"error",timer:2e3})}}),$(".calcin>div>.row>div>div").on({mousedown:function(){$(this).addClass("active")},mouseup:function(){$(this).removeClass("active");var t=$("#clac_textarea").val(),e=$(this).data("ivalue"),i=eouluGlobal.S_getCaretPosition($("#clac_textarea")[0]);if("Number"!=e&&"退格"!=e){var a=t.substring(0,i)+e+t.substring(i,t.length);$("#clac_textarea").val(a);var n=Number($(this).data("ipos"));eouluGlobal.S_setCaretPosition($("#clac_textarea")[0],i+e.toString().length+n)}else if("Number"==e)$(".row.toggleRow").slideToggle(150),eouluGlobal.S_setCaretPosition($("#clac_textarea")[0],i);else if("退格"==e){var r=$("#clac_textarea").val().substring(0,i-1)+$("#clac_textarea").val().substring(i,$("#clac_textarea").val().length);$("#clac_textarea").val(r),eouluGlobal.S_setCaretPosition($("#clac_textarea")[0],i-1)}}}),$("#clac_textarea").on("keydown",function(t){var e=t.keyCode||t.which||t.charCode;if(-1==_.indexOf(RF_SP2Store.allowKeyCode,e))return!1}).on("input propertychange change",function(){var t=$(this).val();t=t.replace(/[\u4e00-\u9fa5]+/g,""),$("#clac_textarea").val(t),eouluGlobal.S_setCaretPosition($("#clac_textarea")[0],eouluGlobal.S_getCaretPosition($("#clac_textarea")[0]))}),$(".g_bodyin_bodyin_bottom_rsubin_tit>button").on({click:function(){var t=$(this).next();if("enter"==t.data("imouseenter"))return!1;t.toggleClass("clicked"),t.hasClass("clicked")?(t.slideDown(600),$(this).html('<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> 关闭Marker设置')):(t.slideUp(600),$(this).html('<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> 打开Marker设置'))},mouseenter:function(){var t=$(this).next();if(t.hasClass("clicked"))return!1;t.data("imouseenter","enter"),t.addClass("clicked").slideDown(600,function(){t.data("imouseenter","leave")}),$(this).html('<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> 关闭Marker设置')}}),$("#comfirm_key").click(function(){var t=$(this).parent().prev().children("select").val();if(_.isNil(t)||_.isEqual(t,"请选择"))return!1;RF_SP2Store.stateObj.comfirm_key=t,RF_SP2Store.stateObj.splineSelectedArr=[],$(".buildMarker_body>div tbody").empty(),store.set("futureDT2Online__"+$("body").data("curusername")+"__ProjectAnalysis__comfirm_key",RF_SP2Store.stateObj.comfirm_key),RF_SP2SwalMixin({title:"Marker确认Key提示",text:"成功，现在可以选点了，请记得保存",type:"success",timer:1e3,showConfirmButton:!1}).then(function(t){t.dismiss!=swal.DismissReason.backdrop&&t.dismiss!=swal.DismissReason.esc&&t.dismiss!=swal.DismissReason.timer||(RF_SP2Store.stateObj.key_y=!1,$(".reRenderBtnDiv").trigger("click"),RF_SP2Store.stateObj.renderSelectCsvSub=!0)})}),$(document).on("input propertychange change",".buildMarker_body>.container-fluid tbody td:nth-child(1)",function(){var i=$(this).data("iorigin"),a=$(this).text(),n=!0;_.forEach(RF_SP2Store.stateObj.splineSelectedArr,function(t,e){if(t.markerName!=i&&t.markerName==a)return n=!1}),n||$(this).text(i)}).on("blur",".buildMarker_body>.container-fluid tbody td:nth-child(1)",function(){var t=$(this).data("iorigin"),e=$(this).text();if(/Marker\d+/.test(e)){var i=$(this).parent().index(),a=!0;$(".buildMarker_body>.container-fluid tbody td:nth-child(1)").each(function(t){if(i!=t&&e==$(this).text())return a=!1}),a||$(this).text(t)}else $(this).text(t)}),$(".buildMarker_footin>.btn-primary").click(function(){_.forEach(RF_SP2Store.stateObj.splineSelectedArr,function(t,e){var i=$(".buildMarker_body>.container-fluid tbody>tr[data-iflag='"+(t.name+t.x)+"']").children("td").eq(0).text();t.markerName=i,t.id=i.match(/Marker(\d+)/)[1]}),store.set("futureD__RF_SP2__splineSelectedArr",RF_SP2Store.stateObj.splineSelectedArr),RF_SP2SwalMixin({title:"Marker提交提示",text:"保存成功",type:"success",timer:1200,showConfirmButton:!1}).then(function(t){t.dismiss!=swal.DismissReason.backdrop&&t.dismiss!=swal.DismissReason.esc&&t.dismiss!=swal.DismissReason.timer||(store.set("futureD__RF_SP2__saveMarkerFlag","hasSave"),window.location.reload())})}),$(document).on("click","div.awesomplete ul[role='listbox']>li",function(){}),$(document).on("dblclick",".chartWarp",function(){RF_SP2Store.stateObj.dblclickFlag=!0,$(".allLegends").hide();var e=$(this).data("itargetchart");$(".fourChart_div").fadeOut(200,function(){$(".signalChart_div").fadeIn(200),$("#"+e).siblings().fadeOut(100),$("#"+e).delay(100).fadeIn(150,function(){var t=e.replace("_chart_S","");"S12"==t||"S21"==t?getDataBuildBigS12S21({iclassify:t,itargetchart:e,callback:function(){$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!1),setTimeout(function(){$(".indicatrix_footin>.btn-success").trigger("click")},50)}}):(getDataBuildBigS11S22({iclassify:t,itargetchart:e}),$(".signalChart_div_tit>button:not(.backover)").prop("disabled",!0))}).data("iflag","initial")})}),$(".signalChart_div_tit>button.backover").click(function(){$(".signalChart_div").fadeOut(200,function(){$(".fourChart_div").fadeIn(100,function(){$(window).trigger("resize"),setTimeout(function(){_.forEach(RF_SP2Store.stateObj.S2PSmallChartSmithArr,function(t,e,i){i[e].onresize()})},50)}),RF_SP2Store.stateObj.dblclickFlag=!1})}),$(".signalChart_div_tit>.open_del_indicatrix").click(function(){$(".RF_SP2_cover, .indicatrix_div").slideDown(200);var t=$("[id$='_chart_S']:visible").attr("id");if(_.isNil(t))return!1;var e=t.replace("_chart_S",""),i="",a="";_.forEach(RF_SP2Store.stateObj[e].indicatrix_up,function(t,e){i+='<tr><td><input type="text" class="form-control AwesompleteX input_X1" value="'+t[0]+'"></td><td><input type="text" class="form-control AwesompleteX input_X2" value="'+t[1]+'"></td><td><input type="text" class="form-control input_Y0" value="'+t[2]+'"></td><td><span class="glyphicon glyphicon-ok" aria-hidden="true"></span><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></td></tr>'}),_.forEach(RF_SP2Store.stateObj[e].indicatrix_low,function(t,e){a+='<tr><td><input type="text" class="form-control AwesompleteX input_X1" value="'+t[0]+'"></td><td><input type="text" class="form-control AwesompleteX input_X2" value="'+t[1]+'"></td><td><input type="text" class="form-control input_Y0" value="'+t[2]+'"></td><td><span class="glyphicon glyphicon-ok" aria-hidden="true"></span><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></td></tr>'}),RF_SP2Store.stateObj[e].indicatrix_up.length=0,RF_SP2Store.stateObj[e].indicatrix_low.length=0,$(".indicatrix_body #upflag_table tbody").empty().append(i),$(".indicatrix_body #lowflag_table tbody").empty().append(a),$(".indicatrix_body #upflag_table tbody").find(".glyphicon-ok").trigger("click"),$(".indicatrix_body #lowflag_table tbody").find(".glyphicon-ok").trigger("click"),_.isEmpty(_.concat(RF_SP2Store.stateObj[e].indicatrix_low,RF_SP2Store.stateObj[e].indicatrix_up))&&$(".indicatrix_footin>.btn-success").prop("disabled",!0),$(".indicatrix_body tbody").find("input[type='text']").each(function(t,e){new Awesomplete(e,{list:RF_SP2Store.stateObj.smithSXCategories,minChars:1,maxItems:15,autoFirst:!0})})}),$(".indicatrix_tit>span.glyphicon, .indicatrix_footin>.btn-warning").click(function(){if(0<$("div.indicatrix_body td>.glyphicon-ok:visible").length)return RF_SP2SwalMixin({title:"指标线面板关闭提示",text:"请先保存或删除所填",type:"warning",timer:1900,showConfirmButton:!1}),!1;$(".RF_SP2_cover, .indicatrix_div").slideUp(200)}),$(document).on("click","#upflag_table>tbody .glyphicon-remove, #lowflag_table>tbody .glyphicon-remove",function(){var t=$("[id$='_chart_S']:visible").attr("id");if(_.isNil(t))return!1;var e=t.replace("_chart_S","");if($(this).parent().parent().hasClass("hasOk")){var i,a=[];$(this).parent().siblings("td").each(function(t){t<3&&(a[t]=parseFloat($(this).find("input[type='text']").val()))}),i=$(this).parents("#lowflag_table").length?RF_SP2Store.stateObj[e].indicatrix_low:RF_SP2Store.stateObj[e].indicatrix_up,_.pullAt(i,_.findIndex(i,function(t){return _.isEqual(t,a)}))}$(this).parent().parent().remove();var n=$("#upflag_table tbody tr.hasOk").length,r=$("#lowflag_table tbody tr.hasOk").length,o=$("#upflag_table tbody tr").length,l=$("#lowflag_table tbody tr").length;if(0===n&&0===r){var s=$("[id$=_chart_S]:visible").data("iflag");"initial"==s?getDataBuildBigS12S21({iclassify:e,itargetchart:t}):"XYOfPhase"==s?RF_SP2Store.util.graphStyleHandler({iclassify:e,itargetchart:t,contextFlag:!0,graphStyle:s}):"XYOfMagnitude"==s?RF_SP2Store.util.graphStyleHandler({iclassify:e,itargetchart:t,contextFlag:!0,graphStyle:s}):"XYdBOfMagnitude"==s&&getDataBuildBigS12S21({iclassify:e,itargetchart:t,contextFlag:!0,graphStyle:s}),$(".indicatrix_footin>.btn-success").prop("disabled",!0)}else $(".indicatrix_footin>.btn-success").prop("disabled",!1);var c=$("#upflag_table").prev().children("span"),d=$("#lowflag_table").prev().children("span");0===o||o===n?c.fadeIn(100):c.fadeOut(100),0===l||l===r?d.fadeIn(100):d.fadeOut(100)}),$(".indicatrix_footin>.btn-success").click(function(){var e=$("[id$='_chart_S']:visible").attr("id");if(_.isNil(e))return!1;var t=e.replace("_chart_S","");if(_.isEmpty(_.concat(RF_SP2Store.stateObj[t].indicatrix_low,RF_SP2Store.stateObj[t].indicatrix_up)))return!1;if(!_.isNil(e)){RF_SP2Store.stateObj.indicatrix_state_arr=[];var S=_.find(Highcharts.charts,function(t){if(!_.isNil(t))return $(t.renderTo).is("div#"+e)}),f=S.series,i=0,a=[];_.forEach(f,function(t,e){_.includes(t.name,"低于指标#")&&a.push(e),f[e].update({color:"#00FF00"})}),_.forEach(f,function(t,e){_.includes(t.name,"高于指标#")&&a.push(e)}),_.forEach(a,function(t,e){f[t-i].remove(),i++});var g=S.xAxis[0].categories,m=.02*(RF_SP2Store.stateObj.indicatrix_min_max[1]-RF_SP2Store.stateObj.indicatrix_min_max[0]);_.forEach(RF_SP2Store.stateObj[t].indicatrix_low,function(n,t){var e=[],r=_.indexOf(g,n[0]),o=_.indexOf(g,n[1]),i=!1,a=!1;if(-1==r){var l=_.findIndex(g,function(t,e){return t>n[0]});if(-1==l||0==l)i=!0;else{var s=Math.abs(n[0]-g[l-1]),c=Math.abs(n[0]-g[l]);r=s<c?l-1:l}}if(-1==o){var d=_.findLastIndex(g,function(t,e){return t<n[1]});if(-1==d||d==g.length-1)a=!0;else{var u=Math.abs(n[1]-g[d-1]),p=Math.abs(n[1]-g[d]);o=u<=p?d-1:d}}if(i||a)return RF_SP2SwalMixin({title:"自动标记指标线提示",text:"第"+(t+1)+"条指标线的X1或X2值找不到对应点",type:"warning",timer:1900,showConfirmButton:!1}),!0;e.push([r,n[2]+m]),e.push([r,n[2]]),e.push([o,n[2]]),e.push([o,n[2]+m]),S.addSeries({name:"低于指标#"+t,data:e,showInLegend:!1,enableMouseTracking:!0,dataLabels:{enabled:!0,formatter:function(){return this.x}},color:"#000",tooltip:{headerFormat:!1,pointFormat:!1,footerFormat:!1},events:{mouseOver:function(){var t=_.find(RF_SP2Store.stateObj.indicatrix_state_arr,function(t,e){return this.name==t.name}.bind(this));_.forEach(t.seriesName,function(i,t){var e=_.find(f,function(t,e){return t.name==i});e.update({lineWidth:4}),e.select(!0)})},mouseOut:function(){var t=_.find(RF_SP2Store.stateObj.indicatrix_state_arr,function(t,e){return this.name==t.name}.bind(this));_.forEach(t.seriesName,function(i,t){var e=_.find(f,function(t,e){return t.name==i});e.update({lineWidth:2}),e.select(!1)})}},point:{events:{mouseOver:void 0}}});var h=[];_.forEach(f,function(t,e){if(_.includes(t.name,"低于指标#"))return!0;if(_.includes(t.name,"高于指标#"))return!0;var i=t.yData,a=!1;_.forEach(i,function(t,e){if(r<=e&&e<=o&&t>n[2])return!(a=!0)}),a&&(h.push(f[e].name),"#FF0000"!=f[e].color&&"#ff0000"!=f[e].color&&f[e].update({color:"#FF0000"}))}),RF_SP2Store.stateObj.indicatrix_state_arr.push({name:"低于指标#"+t,seriesName:h})}),_.forEach(RF_SP2Store.stateObj[t].indicatrix_up,function(n,t){var e=[],r=_.indexOf(g,n[0]),o=_.indexOf(g,n[1]),i=!1,a=!1;if(-1==r){var l=_.findIndex(g,function(t,e){return t>n[0]});if(-1==l||0==l)i=!0;else{var s=Math.abs(n[0]-g[l-1]),c=Math.abs(n[0]-g[l]);r=s<c?l-1:l}}if(-1==o){var d=_.findLastIndex(g,function(t,e){return t<n[1]});if(-1==d||d==g.length-1)a=!0;else{var u=Math.abs(n[1]-g[d-1]),p=Math.abs(n[1]-g[d]);o=u<=p?d-1:d}}if(i||a)return RF_SP2SwalMixin({title:"自动标记指标线提示",text:"第"+(t+1)+"条指标线的X1或X2值找不到对应点",type:"warning",timer:1900,showConfirmButton:!1}),!0;e.push([r,n[2]-m]),e.push([r,n[2]]),e.push([o,n[2]]),e.push([o,n[2]-m]),S.addSeries({name:"高于指标#"+t,data:e,showInLegend:!1,enableMouseTracking:!0,dataLabels:{enabled:!0,formatter:function(){return this.x}},color:"#000",tooltip:{headerFormat:!1,pointFormat:!1,footerFormat:!1},events:{mouseOver:function(){var t=_.find(RF_SP2Store.stateObj.indicatrix_state_arr,function(t,e){return this.name==t.name}.bind(this));_.forEach(t.seriesName,function(i,t){var e=_.find(f,function(t,e){return t.name==i});e.update({lineWidth:4}),e.select(!0)})},mouseOut:function(){var t=_.find(RF_SP2Store.stateObj.indicatrix_state_arr,function(t,e){return this.name==t.name}.bind(this));_.forEach(t.seriesName,function(i,t){var e=_.find(f,function(t,e){return t.name==i});e.update({lineWidth:2}),e.select(!1)})}},point:{events:{mouseOver:void 0}}});var h=[];_.forEach(f,function(t,e){if(_.includes(t.name,"低于指标#"))return!0;if(_.includes(t.name,"高于指标#"))return!0;var i=t.yData,a=!1;_.forEach(i,function(t,e){if(r<=e&&e<=o&&t<n[2])return!(a=!0)}),a&&(h.push(f[e].name),"#FF0000"!=f[e].color&&"#ff0000"!=f[e].color&&f[e].update({color:"#FF0000"}))}),RF_SP2Store.stateObj.indicatrix_state_arr.push({name:"高于指标#"+t,seriesName:h})}),_.forEach(RF_SP2Store.stateObj.indicatrix_state_arr,function(e,t){if(_.isEmpty(e.seriesName))return!0;_.find(f,function(t){return t.name==e.name}).update({color:"#FF1493"})})}$(".indicatrix_footin>.btn-warning").trigger("click")}),$(".indicatrix_body legend>span").click(function(){$('<tr><td><input type="text" class="form-control AwesompleteX input_X1"></td><td><input type="text" class="form-control AwesompleteX input_X2"></td><td><input type="text" class="form-control input_Y0"></td><td><span class="glyphicon glyphicon-ok" aria-hidden="true"></span><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></td></tr>').appendTo($(this).parent().next().children("tbody")).find("input.AwesompleteX").each(function(t,e){new Awesomplete(e,{list:RF_SP2Store.stateObj.smithSXCategories,minChars:1,maxItems:15,autoFirst:!0})}),$(this).fadeOut(100)}),$(document).on("click",".indicatrix_body tbody span.glyphicon-ok",function(){var t=$("[id$='_chart_S']:visible").attr("id");if(_.isNil(t))return!1;var e,i=t.replace("_chart_S",""),a=$(this).parent().parent(),n=a.find(".input_X1").val().trim(),r=a.find(".input_X2").val().trim(),o=a.find(".input_Y0").val().trim();if(_.isEmpty(n)||_.isEmpty(r)||_.isEmpty(o))return!1;$(this).parents().is("#upflag_table")?e=RF_SP2Store.stateObj[i].indicatrix_up:$(this).parents().is("#lowflag_table")&&(e=RF_SP2Store.stateObj[i].indicatrix_low);var l=Math.min(Number(n),Number(r)),s=Math.max(Number(n),Number(r)),c=Number(o);judgeLineSegmentIntersect(l,s,_.concat(RF_SP2Store.stateObj[i].indicatrix_up,RF_SP2Store.stateObj[i].indicatrix_low))?RF_SP2SwalMixin({title:"选择区间提示",text:"区间与已有区间重合，请重选",type:"info",showConfirmButton:!1,timer:1500}):(e.push([l,s,c]),a.find(".input_Y0").val(c),$(".indicatrix_footin>.btn-success").prop("disabled",!1),$(this).fadeOut(100).parent().parent().parent().parent().prev().children("span").fadeIn(100),a.addClass("hasOk").find("input[type='text']").prop("disabled",!0))}).on("input propertychange change",".input_Y0",function(){_.isNil($(this).val().match(/(\-|\+)?\d*\.?\d*/g))?$(this).val(""):$(this).val(_.head($(this).val().match(/(\-|\+)?\d*\.?\d*/g)))}),$(".indicatrix_footin>.btn-danger").click(function(){var t=$("[id$='_chart_S']:visible").attr("id");if(_.isNil(t))return!1;var e=t.replace("_chart_S","");if(_.isEmpty(_.concat(RF_SP2Store.stateObj[e].indicatrix_up,RF_SP2Store.stateObj[e].indicatrix_low)))return!1;$(".indicatrix_footin>.btn-warning").trigger("click"),$("#upflag_table>tbody, #lowflag_table>tbody").empty(),RF_SP2Store.stateObj[e].indicatrix_up.length=0,RF_SP2Store.stateObj[e].indicatrix_low.length=0,$(".indicatrix_footin>.btn-success").prop("disabled",!0),$(".indicatrix_body legend>span").fadeIn(100),getDataBuildBigS12S21({iclassify:e,itargetchart:t})}),$.contextMenu({selector:"#S11_chart_S, #S22_chart_S, #S12_chart_S, #S21_chart_S",callback:function(t,e){if(e.$trigger instanceof jQuery){var i=e.$trigger;_.isNil(i.data("highcharts-chart"))?i.empty():i.highcharts().destroy();var a=i.parent(),n=i.data("iclassify");i.remove(),a.append('<div id="'+n+'_chart_S" data-iflag="'+t+'" data-iclassify="'+n+'" style="display: block;"></div>')}RF_SP2Store.util.graphStyleDispatch({graphStyle:t})},items:{Smith:{name:"Smith",icon:""},Polar:{name:"Polar",icon:""},XYOfPhase:{name:"XYOfPhase",icon:""},XYOfMagnitude:{name:"XYOfMagnitude",icon:""},XYdBOfMagnitude:{name:"XYdBOfMagnitude",icon:""}}}),$("#RFSP2SmallLegend").click(function(t){t=t||window.event,$(".allLegends").css({left:t.pageX+"px",top:t.pageY+"px"}).fadeIn(200);var i="";_.forEach(RF_SP2Store.stateObj.S2PSmallChartSmithData.S11,function(t,e){i+='<div class="row"><div class="col-sm-2 col-md-2 col-lg-2"><p class="legend_color" style="background-color: '+t.color+'"></p></div><div class="col-sm-10 col-md-10 col-lg-10"><p class="legend_text">'+t.name+"</p></div></div>"}),$(".allLegends_body>.container-fluid").empty().append(i)}),$(".allLegends_tit>span").click(function(){$(".allLegends").fadeOut(200)});